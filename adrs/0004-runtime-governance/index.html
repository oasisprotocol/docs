<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-adrs/0004-runtime-governance" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">ADR 0004: Runtime Governance | Oasis Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.oasis.io/adrs/0004-runtime-governance"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ADR 0004: Runtime Governance | Oasis Documentation"><meta data-rh="true" name="description" content="Component"><meta data-rh="true" property="og:description" content="Component"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.oasis.io/adrs/0004-runtime-governance"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/adrs/0004-runtime-governance" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/adrs/0004-runtime-governance" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.e55d6d10.css">
<script src="/assets/js/runtime~main.296dd946.js" defer="defer"></script>
<script src="/assets/js/main.1fc431be.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/img/logo_dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Oasis Docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.svg" alt="Oasis Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/build/">Build</a><a class="navbar__item navbar__link" href="/general/">Learn</a><a class="navbar__item navbar__link" href="/get-involved/">Get Involved</a><a class="navbar__item navbar__link" href="/node/">Run Node</a><a class="navbar__item navbar__link" href="/core/">Develop Core</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub repository" aria-label="GitHub repository"></a><a href="https://oasis.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-www-link" title="Oasis website" aria-label="Oasis website"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/adrs"><span title="Architectural Decision Records" class="categoryLinkLabel_W154">Architectural Decision Records</span></a><button aria-label="Collapse sidebar category &#x27;Architectural Decision Records&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0001-tm-multi-root-apphash"><span title="ADR 0001: Multiple Roots Under the Tendermint Application Hash" class="linkLabel_WmDU">ADR 0001: Multiple Roots Under the Tendermint Application Hash</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0002-go-modules-compatible-git-tags"><span title="ADR 0002: Go Modules Compatible Git Tags" class="linkLabel_WmDU">ADR 0002: Go Modules Compatible Git Tags</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0003-consensus-runtime-token-transfer"><span title="ADR 0003: Consensus/Runtime Token Transfer" class="linkLabel_WmDU">ADR 0003: Consensus/Runtime Token Transfer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/adrs/0004-runtime-governance"><span title="ADR 0004: Runtime Governance" class="linkLabel_WmDU">ADR 0004: Runtime Governance</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0005-runtime-compute-slashing"><span title="ADR 0005: Runtime Compute Node Slashing" class="linkLabel_WmDU">ADR 0005: Runtime Compute Node Slashing</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0006-consensus-governance"><span title="ADR 0006: Consensus Governance" class="linkLabel_WmDU">ADR 0006: Consensus Governance</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0007-improved-random-beacon"><span title="ADR 0007: Improved Random Beacon" class="linkLabel_WmDU">ADR 0007: Improved Random Beacon</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0008-standard-account-key-generation"><span title="ADR 0008: Standard Account Key Generation" class="linkLabel_WmDU">ADR 0008: Standard Account Key Generation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0009-ed25519-semantics"><span title="ADR 0009: Ed25519 Signature Verification Semantics" class="linkLabel_WmDU">ADR 0009: Ed25519 Signature Verification Semantics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0010-vrf-elections"><span title="ADR 0010: VRF-based Committee Elections" class="linkLabel_WmDU">ADR 0010: VRF-based Committee Elections</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0011-incoming-runtime-messages"><span title="ADR 0011: Incoming Runtime Messages" class="linkLabel_WmDU">ADR 0011: Incoming Runtime Messages</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0012-runtime-message-results"><span title="ADR 0012: Runtime Message Results" class="linkLabel_WmDU">ADR 0012: Runtime Message Results</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0013-runtime-upgrades"><span title="ADR 0013: Runtime Upgrade Improvements" class="linkLabel_WmDU">ADR 0013: Runtime Upgrade Improvements</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0014-runtime-signing-tx-with-hardware-wallet"><span title="ADR 0014: Signing Runtime Transactions with Hardware Wallet" class="linkLabel_WmDU">ADR 0014: Signing Runtime Transactions with Hardware Wallet</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0015-vrf-per-block-entropy"><span title="ADR 0015: Randomized Paratime Proposer Selection" class="linkLabel_WmDU">ADR 0015: Randomized Paratime Proposer Selection</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0016-consensus-parameters-change-proposal"><span title="ADR 0016: Consensus Parameters Change Proposal" class="linkLabel_WmDU">ADR 0016: Consensus Parameters Change Proposal</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0017-app-standards"><span title="ADR 0017: ParaTime Application Standard Proposal Process" class="linkLabel_WmDU">ADR 0017: ParaTime Application Standard Proposal Process</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0020-governance-delegator-votes"><span title="ADR 0020: Governance Support for Delegator Votes" class="linkLabel_WmDU">ADR 0020: Governance Support for Delegator Votes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0021-keymanager-ephemeral-secrets"><span title="ADR 0021: Forward-Secret Ephemeral Secrets" class="linkLabel_WmDU">ADR 0021: Forward-Secret Ephemeral Secrets</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0022-keymanager-master-secrets"><span title="ADR 0022: Forward-Secret Master Secrets" class="linkLabel_WmDU">ADR 0022: Forward-Secret Master Secrets</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0023-keymanager-secret-sharing"><span title="ADR 0023: Secret Sharing Schemes (CHURP)" class="linkLabel_WmDU">ADR 0023: Secret Sharing Schemes (CHURP)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0024-off-chain-runtime-logic"><span title="ADR 0024: Runtime Off-chain Logic (ROFL)" class="linkLabel_WmDU">ADR 0024: Runtime Off-chain Logic (ROFL)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/adrs/0025-bundle_hot_loading"><span title="ADR 0025: Hot-loading of Runtime Bundles" class="linkLabel_WmDU">ADR 0025: Hot-loading of Runtime Bundles</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ADR 0004: Runtime Governance</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="component">Component<a href="#component" class="hash-link" aria-label="Direct link to Component" title="Direct link to Component" translate="no">​</a></h2>
<p>Oasis Core</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="changelog">Changelog<a href="#changelog" class="hash-link" aria-label="Direct link to Changelog" title="Direct link to Changelog" translate="no">​</a></h2>
<ul>
<li class="">2020-10-07: Add per-role max node limits, minimum required election pool size</li>
<li class="">2020-09-30: Add entity whitelist admission policy max nodes limit</li>
<li class="">2020-09-17: Initial draft</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="status">Status<a href="#status" class="hash-link" aria-label="Direct link to Status" title="Direct link to Status" translate="no">​</a></h2>
<p>Accepted</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context" translate="no">​</a></h2>
<p>Currently all runtimes can only be governed by a single entity -- the runtime
owner. In this regard governance means being able to update certain fields in
the runtime descriptor stored by the consensus layer registry service. On one
hand the runtime descriptor contains security-critical parameters and on the
other there needs to be a mechanism through which the runtimes can be upgraded
(especially so for TEE-based runtimes where a specific runtime binary is
enforced via remote attestation mechanisms).</p>
<p>This proposal extends runtime governance options and enables a path towards
runtimes that can define their own governance mechanisms. This proposal assumes
that <a class="" href="/adrs/0003-consensus-runtime-token-transfer">ADR 0003</a> has been adopted and runtimes can have their own accounts in the
staking module.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="decision">Decision<a href="#decision" class="hash-link" aria-label="Direct link to Decision" title="Direct link to Decision" translate="no">​</a></h2>
<p>This proposal takes a simplistic but powerful approach which allows each runtime
to choose its governance model upon its first registration. It does so through
a newly introduced field in the runtime descriptor which indicates how the
runtime descriptor can be updated in the future.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="runtime-descriptor">Runtime Descriptor<a href="#runtime-descriptor" class="hash-link" aria-label="Direct link to Runtime Descriptor" title="Direct link to Runtime Descriptor" translate="no">​</a></h3>
<p>The runtime descriptor version is bumped to <code>2</code>. Version <code>1</code> descriptors are
accepted at genesis and are converted to the new format by assuming the entity
governance model as that is the only option in v1. All new runtime registrations
must use the v2 descriptor.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="governance-model">Governance Model<a href="#governance-model" class="hash-link" aria-label="Direct link to Governance Model" title="Direct link to Governance Model" translate="no">​</a></h4>
<p>This proposal updates the runtime descriptor by adding fields as follows:</p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Runtime struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // GovernanceModel specifies the runtime governance model.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GovernanceModel RuntimeGovernanceModel `json:&quot;governance_model&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ... existing fields omitted ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// RuntimeGovernanceModel specifies the runtime governance model.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type RuntimeGovernanceModel uint8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GovernanceEntity    RuntimeGovernanceModel = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GovernanceRuntime   RuntimeGovernanceModel = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GovernanceConsensus RuntimeGovernanceModel = 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ... some text serialization methods omitted ...</span><br></span></code></pre></div></div>
<p>The <code>governance_model</code> field can specifiy one of the following governance
models:</p>
<ul>
<li class="">
<p><strong>Entity governance (<code>GovernanceEntity</code>).</strong> This causes the runtime to behave
exactly as before, the runtime owner (indicated by <code>entity_id</code> in the runtime
descriptor) is the only one who can update the runtime descriptor via
<code>registry.RegisterRuntime</code> method calls.</p>
<p>The runtime owner is also the one that needs to provide the required stake
in escrow in order to avoid the runtime from being suspended. As before note
that anyone can delegate the required stake to the runtime owner in order to
enable runtime operation (but the owner can always prevent the runtime from
operating by performing actions which would cause the stake claims to no
longer be satisfied).</p>
</li>
<li class="">
<p><strong>Runtime-defined governance (<code>GovernanceRuntime</code>).</strong> In this case the runtime
itself is the only one who can update the runtime descriptor by emitting a
runtime message. The runtime owner (indicated by <code>entity_id</code>) is not able to
perform any updates after the initial registration and such attempts must
return <code>ErrForbidden</code>.</p>
<p>The runtime itself is the one that needs to provide the required stake in
escrow in order to avoid the runtime from being suspended. This assumes that
runtimes can have accounts in the staking module as specified by <a class="" href="/adrs/0003-consensus-runtime-token-transfer">ADR 0003</a>.
Note that anyone can delegate the required stake to a runtime in order to
enable its operation.</p>
</li>
<li class="">
<p><strong>Consensus layer governance (<code>GovernanceConsensus</code>).</strong> In this case only the
consensus layer itself can update the runtime descriptor either through a
network upgrade or via a consensus layer governance mechanism not specified by
this proposal.</p>
<p>Runtimes using this governance model are never suspended and do not need to
provide stake in escrow.</p>
<p>Runtimes using this governance model cannot be registered/updated via regular
registry method calls or runtime messages (doing so must return
<code>ErrForbidden</code>). Instead such a runtime can only be registered at genesis,
through a network upgrade or via a consensus layer governance mechanism not
specified by this proposal.</p>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="entity-whitelist-admission-policy">Entity Whitelist Admission Policy<a href="#entity-whitelist-admission-policy" class="hash-link" aria-label="Direct link to Entity Whitelist Admission Policy" title="Direct link to Entity Whitelist Admission Policy" translate="no">​</a></h4>
<p>The entity whitelist admission policy configuration structure is changed to
allow specifying the maximum number of nodes that each entity can register under
the given runtime for each role.</p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type EntityWhitelistConfig struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // MaxNodes is the maximum number of nodes that an entity can register under</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // the given runtime for a specific role. If the map is empty or absent, the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // number of nodes is unlimited. If the map is present and non-empty, the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // the number of nodes is restricted to the specified maximum (where zero</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // means no nodes allowed), any missing roles imply zero nodes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxNodes map[node.RolesMask]uint16 `json:&quot;max_nodes,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type EntityWhitelistRuntimeAdmissionPolicy struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Entities map[signature.PublicKey]EntityWhitelistConfig `json:&quot;entities&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The new <code>max_nodes</code> field specifies the maximum number of nodes an entity can
register for the given runtime for each role. If the map is empty or absent, the
number of nodes is unlimited. If the map is present and non-empty, the number of
nodes is restricted to the specified number (where zero means no nodes are
allowed). Any missing roles imply zero nodes.</p>
<p>Each key (roles mask) in the <code>max_nodes</code> map must specify a single role,
otherwise the runtime descriptor is rejected with <code>ErrInvalidArgument</code>.</p>
<p>When transforming runtime descriptors from version 1, an entry in the <code>entities</code>
field maps to an <code>EntityWhitelistConfig</code> structure with <code>max_nodes</code> absent,
denoting that an unlimited number of nodes is allowed (as before).</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="minimum-required-committee-election-pool-size">Minimum Required Committee Election Pool Size<a href="#minimum-required-committee-election-pool-size" class="hash-link" aria-label="Direct link to Minimum Required Committee Election Pool Size" title="Direct link to Minimum Required Committee Election Pool Size" translate="no">​</a></h4>
<p>The executor and storage runtime parameters are updated to add a new field
defining the minimum required committee election pool size. The committee
scheduler is updated to refuse election for a given runtime committee in case
the number of candidate nodes is less than the configured minimum pool size.</p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type ExecutorParameters struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // MinPoolSize is the minimum required candidate compute node pool size.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MinPoolSize uint64 `json:&quot;min_pool_size&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ... existing fields omitted ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type StorageParameters struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // MinPoolSize is the minimum required candidate storage node pool size.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MinPoolSize uint64 `json:&quot;min_pool_size&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ... existing fields omitted ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The value of <code>min_pool_size</code> must be non-zero and must be equal to or greater
than the corresponding sum of <code>group_size</code> and <code>group_backup_size</code>. Otherwise
the runtime descriptor is rejected with <code>ErrInvalidArgument</code>.</p>
<p>When transforming runtime descriptors from version 1, <code>min_pool_size</code> for the
executor committee is computed as <code>group_size + group_backup_size</code> while the
<code>min_pool_size</code> for the storage committee is equal to <code>group_size</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="state">State<a href="#state" class="hash-link" aria-label="Direct link to State" title="Direct link to State" translate="no">​</a></h3>
<p>This proposal introduces/updates the following consensus state in the registry
module:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="stored-runtime-descriptors">Stored Runtime Descriptors<a href="#stored-runtime-descriptors" class="hash-link" aria-label="Direct link to Stored Runtime Descriptors" title="Direct link to Stored Runtime Descriptors" translate="no">​</a></h4>
<p>Since the runtime descriptors can now be updated by actors other than the
initial registering entity, it does not make sense to store signed runtime
descriptors. The value of storage key prefixed with <code>0x13</code> which previously
contained signed runtime descriptors is modified to store plain runtime
descriptors.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="genesis-document">Genesis Document<a href="#genesis-document" class="hash-link" aria-label="Direct link to Genesis Document" title="Direct link to Genesis Document" translate="no">​</a></h3>
<p>This proposal updates the registry part of the genesis document as follows:</p>
<ul>
<li class="">
<p>The type of the <code>runtimes</code> field is changed to a list of runtime descriptors
(was a list of <em>signed</em> runtime descriptors before).</p>
</li>
<li class="">
<p>The type of the <code>suspended_runtimes</code> field is changed to a list of runtime
descriptors (was a list of <em>signed</em> runtime descriptors before).</p>
</li>
</ul>
<p>Runtime descriptors must be transformed to support the new fields.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="transaction-methods">Transaction Methods<a href="#transaction-methods" class="hash-link" aria-label="Direct link to Transaction Methods" title="Direct link to Transaction Methods" translate="no">​</a></h3>
<p>This proposal updates the following transaction methods in the registry module:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="register-runtime">Register Runtime<a href="#register-runtime" class="hash-link" aria-label="Direct link to Register Runtime" title="Direct link to Register Runtime" translate="no">​</a></h4>
<p>Runtime registration enables a new runtime to be created or an existing runtime
to be updated (in case the governance model allows it).</p>
<p><strong>Method name:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">registry.RegisterRuntime</span><br></span></code></pre></div></div>
<p>The body of a register runtime transaction must be a <code>Runtime</code> descriptor.
The signer of the transaction must be the owning entity key.</p>
<p>Registering a runtime may require sufficient stake in either the owning entity&#x27;s
(when entity governance is used) or the runtime&#x27;s (when runtime governance is
used) escrow account.</p>
<p>Changing the governance model from <code>GovernanceEntity</code> to <code>GovernanceRuntime</code> is
allowed. Any other governance model changes are not allowed and must fail with
<code>ErrForbidden</code>. Support for other changes is deferred to a consensus layer
governance mechanism not specified by this proposal.</p>
<p>Using the <code>GovernanceRuntime</code> governance model for a runtime of any kind other
than <code>KindCompute</code> must return <code>ErrInvalidArgument</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="messages">Messages<a href="#messages" class="hash-link" aria-label="Direct link to Messages" title="Direct link to Messages" translate="no">​</a></h3>
<p>This proposal introduces the following runtime messages:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="update-runtime-descriptor">Update Runtime Descriptor<a href="#update-runtime-descriptor" class="hash-link" aria-label="Direct link to Update Runtime Descriptor" title="Direct link to Update Runtime Descriptor" translate="no">​</a></h4>
<p>The update runtime descriptor message enables a runtime to update its own
descriptor when the current governance model allows it.</p>
<p><strong>Field name:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">update_runtime</span><br></span></code></pre></div></div>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type UpdateRuntimeMessage struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    registry.Runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The body of the update runtime descriptor message is a new runtime descriptor
that must be for the runtime emitting this message. Otherwise the message is
considered malformed.</p>
<p>The actions performed when processing the message are the same as those
performed when processing the <code>registry.RegisterRuntime</code> method call, just made
on the runtime&#x27;s (instead of an entity&#x27;s) behalf.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="consensus-parameters">Consensus Parameters<a href="#consensus-parameters" class="hash-link" aria-label="Direct link to Consensus Parameters" title="Direct link to Consensus Parameters" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="registry">Registry<a href="#registry" class="hash-link" aria-label="Direct link to Registry" title="Direct link to Registry" translate="no">​</a></h4>
<p>This proposal introduces the following new consensus parameters in the registry
module:</p>
<ul>
<li class=""><code>enable_runtime_governance_models</code> (set of <code>RuntimeGovernanceModel</code>) specifies
the set of runtime governance models that are allowed to be used when
creating/updating registrations (either via method calls or via runtime
messages). In case a runtime is using a governance model not specified in this
list, an update to such a runtime must fail with <code>ErrForbidden</code>.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rust-runtime-support-library">Rust Runtime Support Library<a href="#rust-runtime-support-library" class="hash-link" aria-label="Direct link to Rust Runtime Support Library" title="Direct link to Rust Runtime Support Library" translate="no">​</a></h3>
<p>The Rust runtime support library (<code>oasis-core-runtime</code>) must be updated to
support the updated and newly needed message structures (the runtime descriptor
and the update runtime message).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="consequences">Consequences<a href="#consequences" class="hash-link" aria-label="Direct link to Consequences" title="Direct link to Consequences" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive">Positive<a href="#positive" class="hash-link" aria-label="Direct link to Positive" title="Direct link to Positive" translate="no">​</a></h3>
<ul>
<li class="">
<p>Runtimes can define their governance model, enabling them to become more
decentralized while still allowing upgrades.</p>
</li>
<li class="">
<p>Runtimes using the entity whitelist admission policy can limit the number of
nodes that each entity can register.</p>
</li>
<li class="">
<p>Runtimes can specify the minimum size of the compute/storage node pool from
which committees are elected.</p>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative">Negative<a href="#negative" class="hash-link" aria-label="Direct link to Negative" title="Direct link to Negative" translate="no">​</a></h3>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="neutral">Neutral<a href="#neutral" class="hash-link" aria-label="Direct link to Neutral" title="Direct link to Neutral" translate="no">​</a></h3>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References" translate="no">​</a></h2>
<ul>
<li class=""><a class="" href="/adrs/0003-consensus-runtime-token-transfer">ADR 0003</a> - Consensus/Runtime Token Transfer</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/oasisprotocol/adrs/edit/main/0004-runtime-governance.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-08-04T08:13:58.000Z" itemprop="dateModified">Aug 4, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/adrs/0003-consensus-runtime-token-transfer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ADR 0003: Consensus/Runtime Token Transfer</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/adrs/0005-runtime-compute-slashing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ADR 0005: Runtime Compute Node Slashing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#component" class="table-of-contents__link toc-highlight">Component</a></li><li><a href="#changelog" class="table-of-contents__link toc-highlight">Changelog</a></li><li><a href="#status" class="table-of-contents__link toc-highlight">Status</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a></li><li><a href="#decision" class="table-of-contents__link toc-highlight">Decision</a><ul><li><a href="#runtime-descriptor" class="table-of-contents__link toc-highlight">Runtime Descriptor</a></li><li><a href="#state" class="table-of-contents__link toc-highlight">State</a></li><li><a href="#genesis-document" class="table-of-contents__link toc-highlight">Genesis Document</a></li><li><a href="#transaction-methods" class="table-of-contents__link toc-highlight">Transaction Methods</a></li><li><a href="#messages" class="table-of-contents__link toc-highlight">Messages</a></li><li><a href="#consensus-parameters" class="table-of-contents__link toc-highlight">Consensus Parameters</a></li><li><a href="#rust-runtime-support-library" class="table-of-contents__link toc-highlight">Rust Runtime Support Library</a></li></ul></li><li><a href="#consequences" class="table-of-contents__link toc-highlight">Consequences</a><ul><li><a href="#positive" class="table-of-contents__link toc-highlight">Positive</a></li><li><a href="#negative" class="table-of-contents__link toc-highlight">Negative</a></li><li><a href="#neutral" class="table-of-contents__link toc-highlight">Neutral</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Tools</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://explorer.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Explorer</a></li><li class="footer__item"><a href="https://wallet.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wallet</a></li><li class="footer__item"><a href="https://github.com/oasisprotocol/cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">CLI</a></li><li class="footer__item"><a href="https://status.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Build</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://faucet.testnet.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Testnet Faucet</a></li><li class="footer__item"><a href="https://playground.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground</a></li><li class="footer__item"><a href="https://api.docs.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Node</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/node/network/mainnet">Mainnet</a></li><li class="footer__item"><a class="footer__link-item" href="/node/network/testnet">Testnet</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://oasis.io/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://t.me/oasisprotocolcommunity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC35UFPcZ2F1wjPxhPrSsESQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li><li class="footer__item"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
<p xmlns:cc="http://creativecommons.org/ns#">Copyright © 2025
by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://oasis.net">
Oasis Protocol Foundation</a>. We <a href="https://oasisprotocol.org/privacy-policy" target="_blank" rel="noopener noreferrer">respect your privacy</a>.
Unless otherwise specified, all text and images on this website are licensed
under <a href="http://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
CC BY 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="/img/cc.svg"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="/img/by.svg"></a>.
This does not include the Oasis software and the code examples, both of which are
licensed under <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
Apache 2.0</a>. Built with &#x2665; and Docusaurus.</p></div></div></div></footer><!--$--><!--/$--></div>
</body>
</html>