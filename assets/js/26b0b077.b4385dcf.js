"use strict";(globalThis.webpackChunkdocs_oasis_io=globalThis.webpackChunkdocs_oasis_io||[]).push([[4037],{8346:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/rofl-compose-app-wrap-f6183037c3fe0e28c60d639c8b1c302d.svg"},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var o=t(96540);const s={},i=o.createContext(s);function a(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(i.Provider,{value:n},e.children)}},95642:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"build/rofl/workflow/build","title":"Build","description":"This operation packs compose.yaml, specific operating system components and","source":"@site/docs/build/rofl/workflow/build.mdx","sourceDirName":"build/rofl/workflow","slug":"/build/rofl/workflow/build","permalink":"/build/rofl/workflow/build","draft":false,"unlisted":false,"editUrl":"https://github.com/oasisprotocol/oasis-sdk/edit/main/docs/rofl/workflow/build.mdx","tags":[],"version":"current","lastUpdatedAt":1767802050000,"frontMatter":{"sidebar_custom_props":{}},"sidebar":"developers","previous":{"title":"Create","permalink":"/build/rofl/workflow/create"},"next":{"title":"Deploy","permalink":"/build/rofl/workflow/deploy"}}');var s=t(74848),i=t(28453);const a={sidebar_custom_props:{tags:void 0}},r="Build",l={},d=[{value:"Update On-chain App Config",id:"update-on-chain-app-config",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"build",children:"Build"})}),"\n",(0,s.jsxs)(n.p,{children:["This operation packs ",(0,s.jsx)(n.code,{children:"compose.yaml"}),", specific operating system components and\nthe hash of a trusted block on the Sapphire chain. All these pieces are needed\nto safely execute our app inside a TEE."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"ROFL-compose-app bundle wrapper",src:t(8346).A+""})}),"\n",(0,s.jsx)(n.p,{children:"Whenever you make changes to your app and want to deploy it, you first need\nto build it. The build process takes the compose file together with other ROFL\nartifacts and deterministically generates a bundle that can later be\ndeployed."}),"\n",(0,s.jsxs)(n.p,{children:["The build process also computes the ",(0,s.jsx)(n.em,{children:"enclave identity"})," of the bundle which is\nused during the process of remote attestation to authenticate the app instances\nbefore granting them access to the key management system and ",(0,s.jsx)(n.a,{href:"../features/",children:"other features"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"To build an app and update the enclave identity in the app manifest, simply run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"oasis rofl build\n"})}),"\n",(0,s.jsx)(n.p,{children:"This will generate a ROFL bundle which can be used for later deployment and\noutput something like:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ROFL app built and bundle written to 'myapp.default.orc'.\n"})}),"\n",(0,s.jsx)(n.h2,{id:"update-on-chain-app-config",children:"Update On-chain App Config"}),"\n",(0,s.jsxs)(n.p,{children:["After any changes to the ",(0,s.jsx)(n.a,{href:"/build/rofl/features/manifest#policy",children:"app's policy"})," defined in the manifest, the on-chain\napp config needs to be updated in order for the changes to take effect."]}),"\n",(0,s.jsx)(n.p,{children:"The designated admin account is able to update this policy by issuing an update\ntransaction which can be done via the CLI by running:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"oasis rofl update\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);