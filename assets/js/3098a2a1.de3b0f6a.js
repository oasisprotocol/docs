"use strict";(globalThis.webpackChunkdocs_oasis_io=globalThis.webpackChunkdocs_oasis_io||[]).push([[7866],{21524:(e,n,r)=>{r.d(n,{A:()=>f});r(96540);var t=r(34164),o=r(28774),i=r(26972),s=r(53465),a=r(16654),d=(r(21312),r(51107));const l={cardContainer:"cardContainer_S8oU",cardTitle:"cardTitle_HoSo",cardDescription:"cardDescription_c27F"};var c=r(74848);function u({href:e,children:n}){return(0,c.jsx)(o.A,{href:e,className:(0,t.A)("card padding--lg",l.cardContainer),children:n})}function h({href:e,icon:n,title:r,description:o,customProps:i}){return(0,c.jsxs)(u,{href:e,children:[(0,c.jsx)(d.A,{as:"h3",className:(0,t.A)("text--truncate",l.cardTitle),title:r,children:r}),o&&(0,c.jsx)("p",{className:(0,t.A)("text--truncate",l.cardDescription),title:o,children:o}),i?.tags&&Array.isArray(i.tags)?(0,c.jsx)("div",{className:"pill",children:i.tags.map(e=>(0,c.jsx)("div",{className:"pills__item pills__item--active tag ",children:e},e))}):null]})}function m({item:e}){const n=(0,i.Nr)(e);!function(){const{selectMessage:e}=(0,s.W)()}();return n?(0,c.jsx)(h,{href:n,icon:"\ud83d\uddc3\ufe0f",title:e.label,description:e.description,customProps:e.customProps}):null}function p({item:e}){const n=(0,a.A)(e.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",r=(0,i.cC)(e.docId??void 0);return(0,c.jsx)(h,{href:e.href,icon:n,title:e.label,description:e.description??r?.description,customProps:e.customProps})}function f({item:e}){switch(e.type){case"link":return(0,c.jsx)(p,{item:e});case"category":return(0,c.jsx)(m,{item:e});default:throw new Error(`unknown item type ${JSON.stringify(e)}`)}}},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var t=r(96540);const o={},i=t.createContext(o);function s(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(i.Provider,{value:n},e.children)}},45159:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>d,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"node/run-your-node/paratime-observer-node","title":"ParaTime Observer Node","description":"These instructions are for setting up a ParaTime observer node, which is a special client node that supports","source":"@site/docs/node/run-your-node/paratime-observer-node.mdx","sourceDirName":"node/run-your-node","slug":"/node/run-your-node/paratime-observer-node","permalink":"/node/run-your-node/paratime-observer-node","draft":false,"unlisted":false,"editUrl":"https://github.com/oasisprotocol/docs/edit/main/docs/node/run-your-node/paratime-observer-node.mdx","tags":[],"version":"current","lastUpdatedAt":1761867754000,"frontMatter":{"sidebar_custom_props":{}},"sidebar":"operators","previous":{"title":"ParaTime Client Node","permalink":"/node/run-your-node/paratime-client-node"},"next":{"title":"ROFL Node","permalink":"/node/run-your-node/rofl-node"}}');var o=r(74848),i=r(28453),s=r(21524),a=r(56116);const d={sidebar_custom_props:{tags:void 0}},l="ParaTime Observer Node",c={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Stake Requirements",id:"stake-requirements",level:3},{value:"Register a New Entity or Update Your Entity Registration",id:"register-a-new-entity-or-update-your-entity-registration",level:3},{value:"(Re)starting the Oasis Node",id:"restarting-the-oasis-node",level:2},{value:"Checking Node Status",id:"checking-node-status",level:2},{value:"See also",id:"see-also",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"paratime-observer-node",children:"ParaTime Observer Node"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["These instructions are for setting up a ",(0,o.jsx)(n.em,{children:"ParaTime observer"})," node, which is a special client node that supports\nconfidential smart contact queries. If you just want to run a ",(0,o.jsx)(n.em,{children:"ParaTime client"})," node, see the\n",(0,o.jsx)(n.a,{href:"/node/run-your-node/paratime-client-node",children:"instructions for running a ParaTime client node"}),". If you want to run a ",(0,o.jsx)(n.em,{children:"ParaTime"})," node\ninstead, see the ",(0,o.jsx)(n.a,{href:"/node/run-your-node/paratime-node",children:"instructions for running a ParaTime node"}),". Similarly, if you want to run a\n",(0,o.jsx)(n.em,{children:"validator"})," or a ",(0,o.jsx)(n.em,{children:"non-validator"})," node instead, see the ",(0,o.jsx)(n.a,{href:"/node/run-your-node/validator-node",children:"instructions for running a validator node"}),"\nor ",(0,o.jsx)(n.a,{href:"/node/run-your-node/non-validator-node",children:"instructions for running a non-validator node"}),"."]})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"/node/run-your-node/prerequisites/set-up-tee",children:"TEE support"})," and a ParaTime client node with a confidential ParaTime is required to run a ParaTime observer node."]})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"There may be per-ParaTime on-chain policy requirements (such as whitelisting) for running observer nodes."})}),"\n",(0,o.jsxs)(n.p,{children:["This guide will cover setting up your ParaTime observer node for the Oasis Network. Observer nodes are ParaTime\nclient nodes that support confidential queries without being elected into the compute committee. They are registered on\nchain so that their eligibility can be enforced by an on-chain policy (e.g. key manager committees can grant them\npermissions). This way users can, for example, run confidential transactions and view calls on ",(0,o.jsx)(n.a,{href:"/build/sapphire/",children:"Sapphire"})," ParaTime.\nThis guide assumes some basic knowledge on the use of command line tools."]}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.p,{children:["Before following this guide, make sure you've followed the ",(0,o.jsx)(n.a,{href:"prerequisites",children:"Prerequisites"}),",\n",(0,o.jsx)(n.a,{href:"/node/run-your-node/non-validator-node",children:"Run a Non-validator Node"}),", and ",(0,o.jsx)(n.a,{href:"/node/run-your-node/paratime-client-node",children:"Run a ParaTime client Node"}),"\nsections and have a working ParaTime client node with ",(0,o.jsx)(n.a,{href:"/node/run-your-node/prerequisites/set-up-tee",children:"TEE support"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"stake-requirements",children:"Stake Requirements"}),"\n",(0,o.jsx)(n.p,{children:"To be able to register as a ParaTime observer node on the Oasis Network, you need to have enough tokens staked in your\nentity's escrow account."}),"\n",(0,o.jsxs)(n.p,{children:["Current minimum staking requirements for a specific ParaTime are listed on the ",(0,o.jsx)(n.a,{href:"/node/run-your-node/prerequisites/stake-requirements",children:"Stake Requirements"})," page. You can also\nuse ",(0,o.jsx)(n.a,{href:"/build/tools/cli/account#delegate",children:"Oasis CLI tools"})," to check that as described in ",(0,o.jsx)(n.a,{href:"/build/tools/cli/network#show-native-token",children:"Common Staking Info"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Finally, to stake the tokens and to check if you staked correctly, you can use any wallet and any explorer. If using\nour ",(0,o.jsx)(n.a,{href:"/build/tools/cli/account#delegate",children:"Oasis CLI tools"})," and if everything was set up correctly, you should see something like below when running\n",(0,o.jsx)(n.a,{href:"/build/tools/cli/account#show",children:(0,o.jsx)(n.code,{children:"oasis account show"})})," command for your entity's account (this is an example for Testnet):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"oasis account show oasis1qrec770vrek0a9a5lcrv0zvt22504k68svq7kzve --show-delegations\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Address: oasis1qrec770vrek0a9a5lcrv0zvt22504k68svq7kzve\nNonce: 33\n\n=== CONSENSUS LAYER (testnet) ===\n  Total: 972.898210067 TEST\n  Available: 951.169098086 TEST\n\n  Active Delegations from this Account:\n    Total: 16.296833986 TEST\n\n    Delegations:\n      - To:     oasis1qz2tg4hsatlxfaf8yut9gxgv8990ujaz4sldgmzx\n        Amount: 16.296833986 TEST (15000000000 shares)\n  Debonding Delegations from this Account:\n    Total: 5.432277995 TEST\n\n    Delegations:\n      - To:       oasis1qz2tg4hsatlxfaf8yut9gxgv8990ujaz4sldgmzx\n        Amount:   5.432277995 TEST (5432277995 shares)\n        End Time: epoch 26558\n\n  Allowances for this Account:\n    Total: 269.5000002 TEST\n    Allowances:\n      - Beneficiary: oasis1qqczuf3x6glkgjuf0xgtcpjjw95r3crf7y2323xd\n        Amount:      269.5 TEST\n      - Beneficiary: oasis1qrydpazemvuwtnp3efm7vmfvg3tde044qg6cxwzx\n        Amount:      0.0000002 TEST\n\n=== sapphire PARATIME ===\nBalances for all denominations:\n  6.9995378 TEST\n"})}),"\n",(0,o.jsxs)(n.admonition,{type:"caution",children:[(0,o.jsx)(n.p,{children:"The stake requirements may differ from ParaTime to ParaTime and are subject to change in the future."}),(0,o.jsxs)(n.p,{children:["Currently, for example, if you want to register an observer node for Testnet/Mainnet, you currently need to have at\nleast ",(0,o.jsx)(n.strong,{children:"200 TEST/ROSE"})," tokens delegated:"]}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"100 TEST/ROSE"})," for registering a new node entity and,"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"100 TEST/ROSE"})," for each observer node."]}),"\n"]}),(0,o.jsxs)(n.p,{children:["See the ",(0,o.jsx)(n.a,{href:"/node/run-your-node/prerequisites/stake-requirements",children:"Stake Requirements"})," page for more details."]})]}),"\n",(0,o.jsx)(n.h3,{id:"register-a-new-entity-or-update-your-entity-registration",children:"Register a New Entity or Update Your Entity Registration"}),"\n",(0,o.jsx)(n.admonition,{type:"danger",children:(0,o.jsxs)(n.p,{children:["Everything in this section should be done on the ",(0,o.jsx)(n.code,{children:"localhost"})," as there are sensitive items that will be created."]})}),"\n",(0,o.jsx)(n.admonition,{type:"danger",children:(0,o.jsx)(n.p,{children:"If you plan to run an observer node for Mainnet and Testnet make sure you create and use two separate entities to\nprevent replay attacks."})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["If you don't have an entity yet, create a new one by following the ",(0,o.jsx)(n.a,{href:"/node/run-your-node/validator-node#initialize-entity",children:"Initialize Entity"})," instructions for validators."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["If you will be running the ParaTime on a new Oasis node, also initialize a new node by following the\n",(0,o.jsx)(n.a,{href:"/node/run-your-node/validator-node#starting-the-oasis-node",children:"Starting the Oasis Node"})," instructions for validators."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Now, ",(0,o.jsx)(n.a,{href:"/node/run-your-node/validator-node#add-your-node-id-to-the-entity-descriptor",children:"list your node ID"})," in the entity descriptor file ",(0,o.jsx)(n.code,{children:"nodes"})," field."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"/node/run-your-node/validator-node#entity-registration",children:"Register"})," the updated entity descriptor."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["By adding the created entity ID in the node config file, you will ",(0,o.jsx)(n.a,{href:"/node/run-your-node/paratime-node#configuration",children:"configure the node"})," to automatically register for\nthe roles it has enabled (i.e. observer role) via the ",(0,o.jsx)(n.code,{children:"registration.entity_id"})," configuration flag. No manual node\nregistration is necessary."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"mode: client\n# ... sections not relevant are omitted ...\nregistration:\n  entity_id: {{ entity_id }}\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Once the registration is complete, please share the Entity IDs with us so that we can whitelist them accordingly."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"restarting-the-oasis-node",children:"(Re)starting the Oasis Node"}),"\n",(0,o.jsx)(n.p,{children:"You can (re)start the node by running the following command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"oasis-node --config /node/etc/config.yml\n"})}),"\n",(0,o.jsx)(n.p,{children:"After one epoch the node should register as observer (assuming it satisfies per-ParaTime policy requirements)."}),"\n",(0,o.jsx)(n.h2,{id:"checking-node-status",children:"Checking Node Status"}),"\n",(0,o.jsx)(n.p,{children:"To ensure that your node has the observer node, you can run the following command after the node has started:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"oasis-node control status -a unix:/node/data/internal.sock\n"})}),"\n",(0,o.jsxs)(n.p,{children:["You should see ",(0,o.jsx)(n.code,{children:'"observer"'})," in the ",(0,o.jsx)(n.code,{children:".registration.descriptor.roles"})," output entry."]}),"\n",(0,o.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,o.jsx)(s.A,{item:(0,a.$)("/node/web3")})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},53465:(e,n,r)=>{r.d(n,{W:()=>l});var t=r(96540),o=r(44586);const i=["zero","one","two","few","many","other"];function s(e){return i.filter(n=>e.includes(n))}const a={locale:"en",pluralForms:s(["one","other"]),select:e=>1===e?"one":"other"};function d(){const{i18n:{currentLocale:e}}=(0,o.A)();return(0,t.useMemo)(()=>{try{return function(e){const n=new Intl.PluralRules(e);return{locale:e,pluralForms:s(n.resolvedOptions().pluralCategories),select:e=>n.select(e)}}(e)}catch(n){return console.error(`Failed to use Intl.PluralRules for locale "${e}".\nDocusaurus will fallback to the default (English) implementation.\nError: ${n.message}\n`),a}},[e])}function l(){const e=d();return{selectMessage:(n,r)=>function(e,n,r){const t=e.split("|");if(1===t.length)return t[0];t.length>r.pluralForms.length&&console.error(`For locale=${r.locale}, a maximum of ${r.pluralForms.length} plural forms are expected (${r.pluralForms.join(",")}), but the message contains ${t.length}: ${e}`);const o=r.select(n),i=r.pluralForms.indexOf(o);return t[Math.min(i,t.length-1)]}(r,n,e)}}},56116:(e,n,r)=>{r.d(n,{$:()=>s});var t=r(23025),o=r(44586);function i(e){for(const n of e){const e=n.href;e&&void 0===globalThis.sidebarItemsMap[e]&&(globalThis.sidebarItemsMap[e]=n),"category"===n.type&&i(n.items)}}function s(e){const{siteConfig:n,siteMetadata:r}=(0,o.A)(),s=(0,t.r)();if(!s)throw new Error("Unexpected: cant find docsVersion in current context");if(void 0===globalThis.sidebarItemsMap){globalThis.sidebarItemsMap={};for(const e in s.docsSidebars)i(s.docsSidebars[e])}if(void 0===globalThis.sidebarItemsMap[e]){if(console.log(`Item ${e} not found. Registered sidebar items:`),console.log(globalThis.sidebarItemsMap),"throw"==n.onBrokenMarkdownLinks)throw new Error(`Unexpected: sidebar item with href ${e} does not exist.`);return globalThis.sidebarItemsMap["/general/"]}return globalThis.sidebarItemsMap[e]}}}]);