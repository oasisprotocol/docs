"use strict";(globalThis.webpackChunkdocs_oasis_io=globalThis.webpackChunkdocs_oasis_io||[]).push([[2046],{28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>t});var s=o(96540);const r={},a=s.createContext(r);function i(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:n},e.children)}},40589:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"build/rofl/workflow/deploy","title":"Deploy","description":"ROFLs can be deployed to any ParaTime that has the ROFL module installed. Most","source":"@site/docs/build/rofl/workflow/deploy.md","sourceDirName":"build/rofl/workflow","slug":"/build/rofl/workflow/deploy","permalink":"/build/rofl/workflow/deploy","draft":false,"unlisted":false,"editUrl":"https://github.com/oasisprotocol/oasis-sdk/edit/main/docs/rofl/workflow/deploy.md","tags":[],"version":"current","lastUpdatedAt":1761563757000,"frontMatter":{"sidebar_custom_props":{}},"sidebar":"developers","previous":{"title":"Build","permalink":"/build/rofl/workflow/build"},"next":{"title":"Test","permalink":"/build/rofl/workflow/test"}}');var r=o(74848),a=o(28453);const i={sidebar_custom_props:{tags:void 0}},t="Deploy",l={},d=[{value:"Deploy on ROFL Marketplace",id:"deploy-on-rofl-marketplace",level:2},{value:"Check That the App is Running",id:"check-that-the-app-is-running",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deploy",children:"Deploy"})}),"\n",(0,r.jsxs)(n.p,{children:["ROFLs can be deployed to any ParaTime that has the ROFL module installed. Most\ncommon is ",(0,r.jsx)(n.a,{href:"/build/sapphire/network",children:"Sapphire"})," which implements all ROFL functionalities."]}),"\n",(0,r.jsxs)(n.p,{children:["Your app will be deployed to a ",(0,r.jsx)(n.a,{href:"/node/run-your-node/rofl-node",children:"ROFL node"}),". This is a light Oasis Node with\nsupport for TEE and configured Sapphire ParaTime. There are two ways to deploy\nyour app:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["The preferred option is to rent a ROFL node using the ",(0,r.jsx)(n.a,{href:"#deploy-on-rofl-marketplace",children:"ROFL\nmarketplace"})," and deploy your app\ndirectly via the ",(0,r.jsx)(n.a,{href:"/build/tools/cli/",children:"Oasis CLI"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Alternatively, you can copy over the ROFL bundle to your ROFL node manually\nand configure it. In this case, consult the ",(0,r.jsx)(n.a,{href:"/node/run-your-node/rofl-node#hosting-the-rofl-app-bundle-directly",children:"ROFL node \u2192 Hosting\nthe ROFL bundle directly"})," section."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deploy-on-rofl-marketplace",children:"Deploy on ROFL Marketplace"}),"\n",(0,r.jsxs)(n.p,{children:["The Oasis CLI has built-in support for renting a machine on the ",(0,r.jsx)(n.a,{href:"/build/rofl/features/marketplace",children:"ROFL\nmarketplace"})," and deploying your app to it. To list offers of\nthe default Oasis-managed ROFL provider, run:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"oasis rofl deploy --show-offers\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Using provider: oasis1qp2ens0hsp7gh23wajxa4hpetkdek3swyyulyrmz (oasis1qp2ens0hsp7gh23wajxa4hpetkdek3swyyulyrmz)\n\nOffers available from the selected provider:\n- playground_short [0000000000000001]\n  TEE: tdx | Memory: 4096 MiB | vCPUs: 2 | Storage: 19.53 GiB\n  Price: 5.0 TEST/hour\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can select a different provider and offer by using the\n",(0,r.jsx)(n.a,{href:"/build/tools/cli/rofl#deploy",children:(0,r.jsx)(n.code,{children:"--provider"})})," and ",(0,r.jsx)(n.a,{href:"/build/tools/cli/rofl#deploy",children:(0,r.jsx)(n.code,{children:"--offer"})})," parameters\nrespectively."]}),"\n",(0,r.jsx)(n.p,{children:"For now, let's just go with defaults and execute:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"oasis rofl deploy\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Using provider: oasis1qp2ens0hsp7gh23wajxa4hpetkdek3swyyulyrmz (oasis1qp2ens0hsp7gh23wajxa4hpetkdek3swyyulyrmz)\nPushing ROFL app to OCI repository 'rofl.sh/0ba0712d-114c-4e39-ac8e-b28edffcada8:1747909776'...\nNo pre-existing machine configured, creating a new one...\nTaking offer: playground_short [0000000000000001]\n"})}),"\n",(0,r.jsx)(n.p,{children:"The command above performed the following actions:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["copied over ROFL bundle .orc to an Oasis-managed OCI repository ",(0,r.jsx)(n.code,{children:"rofl.sh"}),","]}),"\n",(0,r.jsxs)(n.li,{children:["paid an offer ",(0,r.jsx)(n.code,{children:"playground_short"})," with ID ",(0,r.jsx)(n.code,{children:"0000000000000001"})," to provider\n",(0,r.jsx)(n.code,{children:"oasis1qp2ens0hsp7gh23wajxa4hpetkdek3swyyulyrmz"}),","]}),"\n",(0,r.jsx)(n.li,{children:"obtained the machine ID and stored it to the manifest file."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You can check the status of your active ROFL machine by invoking:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"oasis rofl machine show\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Name:       default\nProvider:   oasis1qp2ens0hsp7gh23wajxa4hpetkdek3swyyulyrmz\nID:         00000000000000a2\nOffer:      0000000000000001\nStatus:     accepted\nCreator:    oasis1qpupfu7e2n6pkezeaw0yhj8mcem8anj64ytrayne\nAdmin:      oasis1qpupfu7e2n6pkezeaw0yhj8mcem8anj64ytrayne\nNode ID:    bOlqho9R3JHP64kJk+SfMxZt5fNkYWf6gdhErWlY60E=\nCreated at: 2025-05-22 15:01:47 +0000 UTC\nUpdated at: 2025-05-22 15:01:59 +0000 UTC\nPaid until: 2025-05-22 16:01:47 +0000 UTC\nProxy:\n  Domain: m162.test-proxy-a.rofl.app\n  Ports from compose file:\n    5678 (frontend): https://p5678.m162.test-proxy-a.rofl.app\nResources:\n  TEE:     Intel TDX\n  Memory:  4096 MiB\n  vCPUs:   2\n  Storage: 20000 MiB\nDeployment:\n  App ID: rofl1qpjsc3qplf2szw7w3rpzrpq5rqvzv4q5x5j23msu\n  Metadata:\n    net.oasis.deployment.orc.ref: rofl.sh/0ba0712d-114c-4e39-ac8e-b28edffcada8:1747909776@sha256:77ff0dc76adf957a4a089cf7cb584aa7788fef027c7180ceb73a662ede87a217\nCommands:\n  <no queued commands>\n"})}),"\n",(0,r.jsx)(n.p,{children:"This shows you the details of the machine, including:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Machine status and expiration date"}),"\n",(0,r.jsx)(n.li,{children:"Provider information"}),"\n",(0,r.jsx)(n.li,{children:"Proxy URLs for any published ports"}),"\n",(0,r.jsx)(n.li,{children:"Resource allocation (TEE type, memory, CPUs, storage)"}),"\n",(0,r.jsx)(n.li,{children:"Deployment details"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You can also fetch the logs of your app by invoking the following command and\nsigning the request with app's admin account:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"oasis rofl machine logs\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Logs are not encrypted!",type:"danger",children:(0,r.jsxs)(n.p,{children:["While only app admin can access the logs they are stored ",(0,r.jsx)(n.strong,{children:"unencrypted on the\nROFL node"}),". In production, make sure you never print any confidential data to\nthe standard or error outputs!"]})}),"\n",(0,r.jsx)(n.h2,{id:"check-that-the-app-is-running",children:"Check That the App is Running"}),"\n",(0,r.jsx)(n.p,{children:"To check out all active app replicas regardless of the deployment procedure, use\nthe following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"oasis rofl show\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'App ID:        rofl1qqn9xndja7e2pnxhttktmecvwzz0yqwxsquqyxdf\nAdmin:         oasis1qrydpazemvuwtnp3efm7vmfvg3tde044qg6cxwzx\nStaked amount: 10000.0\nPolicy:\n  {\n    "quotes": {\n      "pcs": {\n        "tcb_validity_period": 30,\n        "min_tcb_evaluation_data_number": 17,\n        "tdx": {}\n      }\n    },\n    "enclaves": [\n      "z+StFagJfBOdGlUGDMH7RlcNUm1uqYDUZDG+g3z2ik8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",\n      "6KfY4DqD1Vi+H7aUn5FwwLobEzERHoOit7xsrPNz3eUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="\n    ],\n    "endorsements": [\n      {\n        "any": {}\n      }\n    ],\n    "fees": 2,\n    "max_expiration": 3\n  }\n\n=== Instances ===\n- RAK:        AQhV3X660/+bR8REaWYkZNR6eAysFShylhe+7Ph00PM=\n  Node ID:    DbeoxcRwDO4Wh8bwq5rAR7wzhiB+LeYn+y7lFSGAZ7I=\n  Expiration: 9\n'})}),"\n",(0,r.jsx)(n.p,{children:"Here you can see that a single instance of the app is running on the given node,\nits public runtime attestation key (RAK) and the epoch at which its\nregistration will expire if not refreshed. Apps in ROFL must periodically\nrefresh their registrations to ensure they don't expire."}),"\n",(0,r.jsxs)(n.p,{children:["You can also check out the status of your app on the Oasis Explorer\n\u2192 Sapphire \u2192 ROFL (",(0,r.jsx)(n.a,{href:"https://explorer.oasis.io/mainnet/sapphire/rofl/app",children:"Mainnet"}),", ",(0,r.jsx)(n.a,{href:"https://explorer.oasis.io/testnet/sapphire/rofl/app",children:"Testnet"}),"):"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);