"use strict";(globalThis.webpackChunkdocs_oasis_io=globalThis.webpackChunkdocs_oasis_io||[]).push([[4013],{28453:(e,n,o)=>{o.d(n,{R:()=>d,x:()=>s});var t=o(96540);const i={},r=t.createContext(i);function d(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(r.Provider,{value:n},e.children)}},90667:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"node/run-your-node/maintenance/adding-or-removing-nodes","title":"Adding or Removing Nodes","description":"At some point you may wish to add or remove nodes from your entity. In order to","source":"@site/docs/node/run-your-node/maintenance/adding-or-removing-nodes.md","sourceDirName":"node/run-your-node/maintenance","slug":"/node/run-your-node/maintenance/adding-or-removing-nodes","permalink":"/node/run-your-node/maintenance/adding-or-removing-nodes","draft":false,"unlisted":false,"editUrl":"https://github.com/oasisprotocol/docs/edit/main/docs/node/run-your-node/maintenance/adding-or-removing-nodes.md","tags":[],"version":"current","lastUpdatedAt":1761867754000,"frontMatter":{"sidebar_custom_props":{}},"sidebar":"operators","previous":{"title":"Handling Network Upgrades","permalink":"/node/run-your-node/maintenance/handling-network-upgrades"},"next":{"title":"Refreshing Node Certificates","permalink":"/node/run-your-node/maintenance/refreshing-certificates"}}');var i=o(74848),r=o(28453);const d={sidebar_custom_props:{tags:void 0}},s="Adding or Removing Nodes",a={},l=[{value:"Overview",id:"overview",level:2},{value:"Obtain the ID of your Node",id:"obtain-the-id-of-your-node",level:2},{value:"Download Your Latest Entity Descriptor",id:"download-your-latest-entity-descriptor",level:2},{value:"Updating Your Entity Descriptor",id:"updating-your-entity-descriptor",level:2},{value:"To Add a Node",id:"to-add-a-node",level:3},{value:"To Remove a Node",id:"to-remove-a-node",level:2},{value:"Submitting Your Entity Registration to the Network",id:"submitting-your-entity-registration-to-the-network",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"adding-or-removing-nodes",children:"Adding or Removing Nodes"})}),"\n",(0,i.jsx)(n.p,{children:"At some point you may wish to add or remove nodes from your entity. In order to\ndo so, you will need to have at least the following:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Access to a synced node"}),"\n",(0,i.jsx)(n.li,{children:"Access to your entity's private key"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["If you just need to temporarily disable your node (e.g. to perform system\nupdates), use ",(0,i.jsx)(n.a,{href:"/node/run-your-node/maintenance/shutting-down-a-node",children:"graceful shutdown"})," instead. This will assure you that your\nentity will not get penalized during node's downtime."]})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The process for adding/removing nodes is similar and has the following steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Obtain the ID of your running Oasis node"}),"\n",(0,i.jsxs)(n.li,{children:["Download your entity descriptor (",(0,i.jsx)(n.code,{children:"entity.json"}),") from the network registry"]}),"\n",(0,i.jsx)(n.li,{children:"Update the entity descriptor by adding/removing a node"}),"\n",(0,i.jsx)(n.li,{children:"Submitting the updated entity descriptor to the network"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"obtain-the-id-of-your-node",children:"Obtain the ID of your Node"}),"\n",(0,i.jsxs)(n.p,{children:["Connect to your ",(0,i.jsx)(n.code,{children:"server"})," and obtain the ID of your node by running:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"oasis-node control status -a unix:/node/data/internal.sock | jq .identity.node\n"})}),"\n",(0,i.jsx)(n.h2,{id:"download-your-latest-entity-descriptor",children:"Download Your Latest Entity Descriptor"}),"\n",(0,i.jsxs)(n.p,{children:["To ensure that we do not update your entity descriptor (",(0,i.jsx)(n.code,{children:"entity.json"}),")\nincorrectly we should get the latest entity descriptor state from the network.\nFor this operation, you will need to know the base64 encoding of your entity's\npublic key."]}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.a,{href:"/build/tools/cli/network#show-id",children:(0,i.jsx)(n.code,{children:"oasis network show"})})," command on your ",(0,i.jsx)(n.code,{children:"localhost"})," to get the latest entity\ndescriptor stored in the network registry. This command is part of ",(0,i.jsx)(n.a,{href:"/build/tools/cli/",children:"Oasis CLI"}),".\nFor example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"oasis network show xQN6ffLSdc51EfEQ2BzltK1iWYAw6Y1CkBAbFzlhhEQ=\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Now store the obtained JSON as ",(0,i.jsx)(n.code,{children:"entity.json"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"updating-your-entity-descriptor",children:"Updating Your Entity Descriptor"}),"\n",(0,i.jsx)(n.h3,{id:"to-add-a-node",children:"To Add a Node"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["Due to how the node election process works, only a single node from your entity\ncan be selected as a validator for any given epoch. Additional nodes will ",(0,i.jsx)(n.em,{children:"not"}),"\ngive you more voting power nor will it, inherently, provide high availability\nto have multiple nodes."]})}),"\n",(0,i.jsxs)(n.p,{children:["To attach a new node with your entity, add the ID of your node obtained in\nthe ",(0,i.jsx)(n.a,{href:"#obtain-the-id-of-your-node",children:"section above"})," to the ",(0,i.jsx)(n.code,{children:"nodes"})," field in your\n",(0,i.jsx)(n.code,{children:"entity.json"}),". For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "v": 2,\n  "id": "xQN6ffLSdc51EfEQ2BzltK1iWYAw6Y1CkBAbFzlhhEQ=",\n  "nodes": [\n     "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=",\n     "BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB="\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"In the above entity descriptor 2 nodes are attached to the entity:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["A node with an identity ",(0,i.jsx)(n.code,{children:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="})]}),"\n",(0,i.jsxs)(n.li,{children:["A node with an identity ",(0,i.jsx)(n.code,{children:"BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB="})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"to-remove-a-node",children:"To Remove a Node"}),"\n",(0,i.jsxs)(n.p,{children:["To remove node with ID ",(0,i.jsx)(n.code,{children:"BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB="})," from your\nentity descriptor, simply remove the record from the array in the ",(0,i.jsx)(n.code,{children:"nodes"})," field.\nFor example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "v": 2,\n  "id": "xQN6ffLSdc51EfEQ2BzltK1iWYAw6Y1CkBAbFzlhhEQ=",\n  "nodes": [\n    "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="\n  ],\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"submitting-your-entity-registration-to-the-network",children:"Submitting Your Entity Registration to the Network"}),"\n",(0,i.jsxs)(n.p,{children:["Finally, to commit the changes on the network, invoke the [",(0,i.jsx)(n.code,{children:"oasis account entity register"}),"] command on your ",(0,i.jsx)(n.code,{children:"localhost"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"oasis account entity register entity.json --account my_entity\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The account used to sign the transaction (",(0,i.jsx)(n.code,{children:"my_entity"})," in the snippet above) must\ncorrespond to the entity ID in ",(0,i.jsx)(n.code,{children:"entity.json"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["If there are no errors, your entity registration should be updated. You can run\nthe ",(0,i.jsx)(n.a,{href:"/build/tools/cli/network#show-id",children:(0,i.jsx)(n.code,{children:"oasis network show"})})," command again to see the changes."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);