<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core/consensus/services/staking" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Staking | Oasis Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.oasis.io/core/consensus/services/staking"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Staking | Oasis Documentation"><meta data-rh="true" name="description" content="The staking service is responsible for managing the staking ledger in the"><meta data-rh="true" property="og:description" content="The staking service is responsible for managing the staking ledger in the"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.oasis.io/core/consensus/services/staking"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/core/consensus/services/staking" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/core/consensus/services/staking" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.e55d6d10.css">
<script src="/assets/js/runtime~main.296dd946.js" defer="defer"></script>
<script src="/assets/js/main.1fc431be.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/img/logo_dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Oasis Docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.svg" alt="Oasis Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/build/">Build</a><a class="navbar__item navbar__link" href="/general/">Learn</a><a class="navbar__item navbar__link" href="/get-involved/">Get Involved</a><a class="navbar__item navbar__link" href="/node/">Run Node</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/core/">Develop Core</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub repository" aria-label="GitHub repository"></a><a href="https://oasis.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-www-link" title="Oasis website" aria-label="Oasis website"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/core/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link" href="/core/development-setup"><span title="Development Setup" class="categoryLinkLabel_W154">Development Setup</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/core/development-setup/build-environment-setup-and-building"><span title="Build Environment Setup and Building" class="categoryLinkLabel_W154">Build Environment Setup and Building</span></a><button aria-label="Expand sidebar category &#x27;Build Environment Setup and Building&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/core/development-setup/running-tests-and-development-networks"><span title="Running Tests and Development Networks" class="categoryLinkLabel_W154">Running Tests and Development Networks</span></a><button aria-label="Expand sidebar category &#x27;Running Tests and Development Networks&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--active" href="/core/high-level-components"><span title="High-Level Components" class="categoryLinkLabel_W154">High-Level Components</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/core/consensus/"><span title="Consensus Layer" class="categoryLinkLabel_W154">Consensus Layer</span></a><button aria-label="Collapse sidebar category &#x27;Consensus Layer&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/transactions"><span title="Transactions" class="linkLabel_WmDU">Transactions</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/core/consensus/services"><span title="Services" class="categoryLinkLabel_W154">Services</span></a><button aria-label="Collapse sidebar category &#x27;Services&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/epochtime"><span title="Epoch Time" class="linkLabel_WmDU">Epoch Time</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/beacon"><span title="Random Beacon" class="linkLabel_WmDU">Random Beacon</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/core/consensus/services/staking"><span title="Staking" class="linkLabel_WmDU">Staking</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/registry"><span title="Registry" class="linkLabel_WmDU">Registry</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/scheduler"><span title="Committee Scheduler" class="linkLabel_WmDU">Committee Scheduler</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/governance"><span title="Governance" class="linkLabel_WmDU">Governance</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/roothash"><span title="Root Hash" class="linkLabel_WmDU">Root Hash</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/keymanager"><span title="Key Manager" class="linkLabel_WmDU">Key Manager</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/genesis"><span title="Genesis Document" class="linkLabel_WmDU">Genesis Document</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/test-vectors"><span title="Transaction Test Vectors" class="linkLabel_WmDU">Transaction Test Vectors</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/core/runtime/"><span title="Runtime Layer" class="categoryLinkLabel_W154">Runtime Layer</span></a><button aria-label="Expand sidebar category &#x27;Runtime Layer&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/core/oasis-node"><span title="Oasis Node" class="categoryLinkLabel_W154">Oasis Node</span></a><button aria-label="Expand sidebar category &#x27;Oasis Node&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link" href="/core/common-functionality"><span title="Common Functionality" class="categoryLinkLabel_W154">Common Functionality</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/encoding"><span title="Encoding" class="linkLabel_WmDU">Encoding</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/crypto"><span title="Cryptography" class="linkLabel_WmDU">Cryptography</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/core/authenticated-grpc"><span title="Protocols" class="categoryLinkLabel_W154">Protocols</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/mkvs"><span title="Merklized Key-Value Store (MKVS)" class="linkLabel_WmDU">Merklized Key-Value Store (MKVS)</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link" href="/core/processes"><span title="Processes" class="categoryLinkLabel_W154">Processes</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/release-process"><span title="Release Process" class="linkLabel_WmDU">Release Process</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/versioning"><span title="Versioning" class="linkLabel_WmDU">Versioning</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/SECURITY"><span title="Security" class="linkLabel_WmDU">Security</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/adrs"><span title="ADRs" class="linkLabel_WmDU">ADRs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://api.docs.oasis.io/js/client" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Core Client TypeScript API" class="linkLabel_WmDU">Core Client TypeScript API</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Core Client Go API" class="linkLabel_WmDU">Core Client Go API</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Staking</h1></header>
<p>The staking service is responsible for managing the staking ledger in the
consensus layer. It enables operations like transferring stake between accounts
and escrowing stake for specific needs (e.g., operating nodes).</p>
<p>The service interface definition lives in <a href="https://github.com/oasisprotocol/oasis-core/tree/master/go/staking/api/api.go" target="_blank" rel="noopener noreferrer" class=""><code>go/staking/api</code></a>. It defines the
supported queries and transactions. For more information you can also check out
the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc" target="_blank" rel="noopener noreferrer" class="">consensus service API documentation</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="tokens-and-base-units">Tokens and Base Units<a href="#tokens-and-base-units" class="hash-link" aria-label="Direct link to Tokens and Base Units" title="Direct link to Tokens and Base Units" translate="no">​</a></h2>
<p>Stake amounts can be denominated in tokens and base units.</p>
<p>Tokens are used in user-facing scenarios (e.g. CLI commands) where the token
amount is prefixed with the token&#x27;s ticker symbol as defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#Genesis" target="_blank" rel="noopener noreferrer" class=""><code>Genesis</code>&#x27;
<code>TokenSymbol</code> field</a>.</p>
<p>Another <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#Genesis" target="_blank" rel="noopener noreferrer" class=""><code>Genesis</code>&#x27; field, <code>TokenValueExponent</code></a>, defines the
token&#x27;s value base-10 exponent.
For example, if <code>TokenValueExponent</code> is 6, then 1 token equals 10^6 (i.e. one
million) base units.</p>
<p>Internally, base units are used for all stake calculation and processing.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="accounts">Accounts<a href="#accounts" class="hash-link" aria-label="Direct link to Accounts" title="Direct link to Accounts" translate="no">​</a></h2>
<p>A staking account is an entry in the staking ledger. It can hold both general
and escrow accounts.</p>
<p>Each staking account has an address which is derived from the corresponding
public key as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[ 1 byte &lt;ctx-version&gt; ][ first 20 bytes of SHA512-256(&lt;ctx-identifier&gt; || &lt;ctx-version&gt; || &lt;data&gt;) ]</span><br></span></code></pre></div></div>
<p>Where <code>&lt;ctx-version&gt;</code> and <code>&lt;ctx-identifier&gt;</code> represent the staking account
address&#x27; context version and identifier and <code>&lt;data&gt;</code> represents the data
specific to the address kind.</p>
<p>There are two kinds of accounts:</p>
<ul>
<li class="">User accounts linked to a specific public key.</li>
<li class="">Runtime accounts linked to a specific <a class="" href="/core/runtime/identifiers">runtime identifier</a>.</li>
</ul>
<p>Addresses use <a href="https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki#bech32" target="_blank" rel="noopener noreferrer" class="">Bech32 encoding</a> for text serialization with <code>oasis</code> as its human
readable part (HRP) prefix (for both kinds of accounts).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="user-accounts">User Accounts<a href="#user-accounts" class="hash-link" aria-label="Direct link to User Accounts" title="Direct link to User Accounts" translate="no">​</a></h3>
<p>In case of user accounts, the <code>&lt;ctx-version&gt;</code> and <code>&lt;ctx-identifier&gt;</code> are as
defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer" class=""><code>AddressV0Context</code> variable</a>, and <code>&lt;data&gt;</code> represents the
account signer&#x27;s public key (e.g. entity id).</p>
<p>For more details, see the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewAddress" target="_blank" rel="noopener noreferrer" class=""><code>NewAddress</code> function</a>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>When generating an account&#x27;s private/public key pair, follow <a class="" href="/adrs/0008-standard-account-key-generation">ADR 0008:
Standard Account Key Generation</a>.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="runtime-accounts">Runtime Accounts<a href="#runtime-accounts" class="hash-link" aria-label="Direct link to Runtime Accounts" title="Direct link to Runtime Accounts" translate="no">​</a></h3>
<p>In case of runtime accounts, the <code>&lt;ctx-version&gt;</code> and <code>&lt;ctx-identifier&gt;</code> are as
defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer" class=""><code>AddressRuntimeV0Context</code> variable</a>, and <code>&lt;data&gt;</code> represents the
<a class="" href="/core/runtime/identifiers">runtime identifier</a>.</p>
<p>For more details, see the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewRuntimeAddress" target="_blank" rel="noopener noreferrer" class=""><code>NewRuntimeAddress</code> function</a>.</p>
<p>The runtime accounts belong to runtimes and can only be manipulated by the
runtime by <a class="" href="/core/runtime/messages">emitting messages</a> to the consensus layer.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reserved-addresses">Reserved Addresses<a href="#reserved-addresses" class="hash-link" aria-label="Direct link to Reserved Addresses" title="Direct link to Reserved Addresses" translate="no">​</a></h3>
<p>Some staking account addresses are reserved to prevent them from being
accidentally used in the actual ledger.</p>
<p>Currently, they are:</p>
<ul>
<li class=""><code>oasis1qrmufhkkyyf79s5za2r8yga9gnk4t446dcy3a5zm</code>: common pool address
(defined by <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer" class=""><code>CommonPoolAddress</code> variable</a>).</li>
<li class=""><code>oasis1qqnv3peudzvekhulf8v3ht29z4cthkhy7gkxmph5</code>: per-block fee accumulator
address (defined by <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer" class=""><code>FeeAccumulatorAddress</code> variable</a>).</li>
<li class=""><code>oasis1qp65laz8zsa9a305wxeslpnkh9x4dv2h2qhjz0ec</code>: governance deposits address
(defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer" class=""><code>GovernanceDeposits</code> variable</a>).</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="general">General<a href="#general" class="hash-link" aria-label="Direct link to General" title="Direct link to General" translate="no">​</a></h3>
<p>General accounts store account&#x27;s general balance and nonce.
Nonce is the incremental number that must be unique for each account&#x27;s
transaction.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="escrow">Escrow<a href="#escrow" class="hash-link" aria-label="Direct link to Escrow" title="Direct link to Escrow" translate="no">​</a></h3>
<p>Escrow accounts are used to hold stake delegated for specific consensus-layer
operations (e.g., registering and running nodes).
Their balance is subject to special delegation provisions and a debonding
period.</p>
<p>Delegation provisions, also called commissions, are specified by the
<a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionSchedule" target="_blank" rel="noopener noreferrer" class=""><code>CommissionSchedule</code> field</a>.</p>
<p>An escrow account also has a corresponding stake accumulator.
It stores stake claims for an escrow account and ensures all claims are
satisfied at any given point.
Adding a new claim is only possible if all of the existing claims plus the new
claim can be satisfied.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="delegation">Delegation<a href="#delegation" class="hash-link" aria-label="Direct link to Delegation" title="Direct link to Delegation" translate="no">​</a></h4>
<p>When a delegator wants to delegate some of amount of stake to a staking account,
he needs to escrow stake using <a href="#add-escrow" class="">Add Escrow method</a>.</p>
<p>Similarly, when a delegator wants to reclaim some amount of escrowed stake back
to his general account, he needs to reclaim stake using <a href="#reclaim-escrow" class="">Reclaim Escrow method</a>.</p>
<p>To simplify accounting, each escrow results in the delegator account being
issued shares which can be converted back to stake during the reclaim escrow
operation.</p>
<p>When a delegator delegates some amount of stake to an escrow account, the
delegator receives the number of shares proportional to the current
<em>share price</em> (in base units) calculated from the total number of stake
delegated to an escrow account so far and the number of shares issued so far:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">shares_per_base_unit = account_issued_shares / account_delegated_base_units</span><br></span></code></pre></div></div>
<p>For example, if an escrow account has the following state:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;escrow&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;active&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;balance&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;250&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;total_shares&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>then the current share price (i.e. <code>shares_per_base_unit</code>) is 1000 / 250 = 4.</p>
<p>Delegating 500 base units to this escrow account would result in 500 * 4 = 2000
newly issued shares.</p>
<p>Thus, the escrow account would have the following state afterwards:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;escrow&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;active&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;balance&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;750&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;total_shares&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>When a delegator wants to reclaim a certain number of escrowed stake, the
<em>base unit price</em> (in shares) must be calculated based on the escrow account&#x27;s
current active balance and the number of issued shares:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">base_units_per_share = account_delegated_base_units / account_issued_shares</span><br></span></code></pre></div></div>
<p>Returning to our example escrow account, the current base unit price (i.e.
<code>base_units_per_share</code>) is 750 / 3000 = 0.25.</p>
<p>Reclaiming 1200 shares would result in 1200 * 0.25 = 300 base units being
reclaimed.</p>
<p>The escrow account would have the following state afterwards:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;escrow&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;active&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;balance&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;450&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;total_shares&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1800&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Reclaiming escrow does not complete immediately, but may be subject to a
debonding period during in which the stake still remains escrowed.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="commission-schedule">Commission Schedule<a href="#commission-schedule" class="hash-link" aria-label="Direct link to Commission Schedule" title="Direct link to Commission Schedule" translate="no">​</a></h4>
<p>A staking account can be configured to take a commission on staking rewards
given to its node(s). They are defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionRateStep" target="_blank" rel="noopener noreferrer" class=""><code>CommissionRateStep</code> type</a>.</p>
<p>The commission rate must be within bounds, which the staking account can also
specify using the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionRateBoundStep" target="_blank" rel="noopener noreferrer" class=""><code>CommissionRateBoundStep</code> type</a>.</p>
<p>The commission rates and rate bounds can change over time which is defined
by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionSchedule" target="_blank" rel="noopener noreferrer" class=""><code>CommissionSchedule</code> type</a>.</p>
<p>To prevent unexpected changes in commission rates and rate bounds, they must
be specified a number of epochs in the future, controlled by the
<a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionScheduleRules" target="_blank" rel="noopener noreferrer" class=""><code>CommissionScheduleRules</code> consensus parameter</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="methods">Methods<a href="#methods" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods" translate="no">​</a></h2>
<p>The following sections describe the methods supported by the consensus staking
service.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="transfer">Transfer<a href="#transfer" class="hash-link" aria-label="Direct link to Transfer" title="Direct link to Transfer" translate="no">​</a></h3>
<p>Transfer enables stake transfer between different accounts in the staking
ledger. A new transfer transaction can be generated using
<a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewTransferTx" target="_blank" rel="noopener noreferrer" class=""><code>NewTransferTx</code> function</a>.</p>
<p><strong>Method name:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.Transfer</span><br></span></code></pre></div></div>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Transfer struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    To     Address           `json:&quot;to&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>to</code> specifies the destination account&#x27;s address.</li>
<li class=""><code>amount</code> specifies the amount of base units to transfer.</li>
</ul>
<p>The transaction signer implicitly specifies the source account.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="burn">Burn<a href="#burn" class="hash-link" aria-label="Direct link to Burn" title="Direct link to Burn" translate="no">​</a></h3>
<p>Burn destroys some stake in the caller&#x27;s account. A new burn transaction can be
generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewBurnTx" target="_blank" rel="noopener noreferrer" class=""><code>NewBurnTx</code> function</a>.</p>
<p><strong>Method name:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.Burn</span><br></span></code></pre></div></div>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Burn struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>amount</code> specifies the amount of base units to burn.</li>
</ul>
<p>The transaction signer implicitly specifies the caller&#x27;s account.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="add-escrow">Add Escrow<a href="#add-escrow" class="hash-link" aria-label="Direct link to Add Escrow" title="Direct link to Add Escrow" translate="no">​</a></h3>
<p>Escrow transfers stake into an escrow account.
For more details, see the <a href="#delegation" class="">Delegation section</a> of this document.
A new add escrow transaction can be generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewAddEscrowTx" target="_blank" rel="noopener noreferrer" class=""><code>NewAddEscrowTx</code> function</a>.</p>
<p><strong>Method name:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.AddEscrow</span><br></span></code></pre></div></div>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Escrow struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Account Address           `json:&quot;account&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amount  quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>account</code> specifies the destination escrow account&#x27;s address.</li>
<li class=""><code>amount</code> specifies the amount of base units to transfer.</li>
</ul>
<p>The transaction signer implicitly specifies the source account.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reclaim-escrow">Reclaim Escrow<a href="#reclaim-escrow" class="hash-link" aria-label="Direct link to Reclaim Escrow" title="Direct link to Reclaim Escrow" translate="no">​</a></h3>
<p>Reclaim escrow starts the escrow reclamation process.
For more details, see the <a href="#delegation" class="">Delegation section</a> of this document.
A new reclaim escrow transaction can be generated using
<a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewReclaimEscrowTx" target="_blank" rel="noopener noreferrer" class=""><code>NewReclaimEscrowTx</code> function</a>.</p>
<p><strong>Method name:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.ReclaimEscrow</span><br></span></code></pre></div></div>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type ReclaimEscrow struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Account Address           `json:&quot;account&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Shares  quantity.Quantity `json:&quot;shares&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>account</code> specifies the source escrow account&#x27;s address.</li>
<li class=""><code>shares</code> specifies the number of shares to reclaim.</li>
</ul>
<p>The transaction signer implicitly specifies the destination account.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="amend-commission-schedule">Amend Commission Schedule<a href="#amend-commission-schedule" class="hash-link" aria-label="Direct link to Amend Commission Schedule" title="Direct link to Amend Commission Schedule" translate="no">​</a></h3>
<p>Amend commission schedule updates the commission schedule specified for the
given escrow account.
For more details, see the <a href="#commission-schedule" class="">Commission Schedule section</a> of this document.
A new amend commission schedule transaction can be
generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewAmendCommissionScheduleTx" target="_blank" rel="noopener noreferrer" class=""><code>NewAmendCommissionScheduleTx</code> function</a>.</p>
<p><strong>Method name:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.AmendCommissionSchedule</span><br></span></code></pre></div></div>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type AmendCommissionSchedule struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amendment CommissionSchedule `json:&quot;amendment&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>amendment</code> defines the amended commission schedule.</li>
</ul>
<p>The transaction signer implicitly specifies the escrow account.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="allow">Allow<a href="#allow" class="hash-link" aria-label="Direct link to Allow" title="Direct link to Allow" translate="no">​</a></h3>
<p>Allow enables an account holder to set an allowance for a beneficiary. A new
allow transaction can be generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewAllowTx" target="_blank" rel="noopener noreferrer" class=""><code>NewAllowTx</code> function</a>.</p>
<p><strong>Method name:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.Allow</span><br></span></code></pre></div></div>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Allow struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Beneficiary  Address           `json:&quot;beneficiary&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Negative     bool              `json:&quot;negative,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AmountChange quantity.Quantity `json:&quot;amount_change&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>beneficiary</code> specifies the beneficiary account address.</li>
<li class=""><code>amount_change</code> specifies the absolute value of the amount of base units to
change the allowance for.</li>
<li class=""><code>negative</code> specifies whether the <code>amount_change</code> should be subtracted instead
of added.</li>
</ul>
<p>The transaction signer implicitly specifies the general account. Upon executing
the allow the following actions are performed:</p>
<ul>
<li class="">
<p>If either the <code>disable_transfers</code> staking consensus parameter is set to <code>true</code>
or the <code>max_allowances</code> staking consensus parameter is set to zero, the method
fails with <code>ErrForbidden</code>.</p>
</li>
<li class="">
<p>It is checked whether either the transaction signer address or the
<code>beneficiary</code> address are reserved. If any are reserved, the method fails with
<code>ErrForbidden</code>.</p>
</li>
<li class="">
<p>Address specified by <code>beneficiary</code> is compared with the transaction signer
address. If the addresses are the same, the method fails with
<code>ErrInvalidArgument</code>.</p>
</li>
<li class="">
<p>The account indicated by the signer is loaded.</p>
</li>
<li class="">
<p>If the allow would create a new allowance and the maximum number of allowances
for an account has been reached, the method fails with <code>ErrTooManyAllowances</code>.</p>
</li>
<li class="">
<p>The set of allowances is updated so that the allowance is updated as specified
by <code>amount_change</code>/<code>negative</code>. In case the change would cause the allowance to
be equal to zero or negative, the allowance is removed.</p>
</li>
<li class="">
<p>The account is saved.</p>
</li>
<li class="">
<p>The corresponding <a href="#allowance-change-event" class=""><code>AllowanceChangeEvent</code></a> is emitted.</p>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="withdraw">Withdraw<a href="#withdraw" class="hash-link" aria-label="Direct link to Withdraw" title="Direct link to Withdraw" translate="no">​</a></h3>
<p>Withdraw enables a beneficiary to withdraw from the given account. A new
withdraw transaction can be generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewWithdrawTx" target="_blank" rel="noopener noreferrer" class=""><code>NewWithdrawTx</code> function</a>.</p>
<p><strong>Method name:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.Withdraw</span><br></span></code></pre></div></div>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Withdraw struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    From   Address           `json:&quot;from&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>from</code> specifies the account address to withdraw from.</li>
<li class=""><code>amount</code> specifies the amount of base units to withdraw.</li>
</ul>
<p>The transaction signer implicitly specifies the destination general account.
Upon executing the withdrawal the following actions are performed:</p>
<ul>
<li class="">
<p>If either the <code>disable_transfers</code> staking consensus parameter is set to <code>true</code>
or the <code>max_allowances</code> staking consensus parameter is set to zero, the method
fails with <code>ErrForbidden</code>.</p>
</li>
<li class="">
<p>It is checked whether either the transaction signer address or the
<code>from</code> address are reserved. If any are reserved, the method fails with
<code>ErrForbidden</code>.</p>
</li>
<li class="">
<p>Address specified by <code>from</code> is compared with the transaction signer address.
If the addresses are the same, the method fails with <code>ErrInvalidArgument</code>.</p>
</li>
<li class="">
<p>The source account indicated by <code>from</code> is loaded.</p>
</li>
<li class="">
<p>The destination account indicated by the transaction signer is loaded.</p>
</li>
<li class="">
<p><code>amount</code> is deducted from the corresponding allowance in the source account.
If this would cause the allowance to go negative, the method fails with
<code>ErrForbidden</code>.</p>
</li>
<li class="">
<p><code>amount</code> is deducted from the source general account balance. If this would
cause the balance to go negative, the method fails with
<code>ErrInsufficientBalance</code>.</p>
</li>
<li class="">
<p><code>amount</code> is added to the destination general account balance.</p>
</li>
<li class="">
<p>Both source and destination accounts are saved.</p>
</li>
<li class="">
<p>The corresponding <a href="#transfer-event" class=""><code>TransferEvent</code></a> is emitted.</p>
</li>
<li class="">
<p>The corresponding <a href="#allowance-change-event" class=""><code>AllowanceChangeEvent</code></a> is emitted with the updated
allowance.</p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="transfer-event">Transfer Event<a href="#transfer-event" class="hash-link" aria-label="Direct link to Transfer Event" title="Direct link to Transfer Event" translate="no">​</a></h3>
<p>The transfer event is emitted when tokens are transferred from a source account
to a destination account.</p>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type TransferEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  From   Address           `json:&quot;from&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  To     Address           `json:&quot;to&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>from</code> contains the address of the source account.</li>
<li class=""><code>to</code> contains the address of the destination account.</li>
<li class=""><code>amount</code> contains the amount (in base units) transferred.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="burn-event">Burn Event<a href="#burn-event" class="hash-link" aria-label="Direct link to Burn Event" title="Direct link to Burn Event" translate="no">​</a></h3>
<p>The burn event is emitted when tokens are burned.</p>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type BurnEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Owner  Address           `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>owner</code> contains the address of the account that burned tokens.</li>
<li class=""><code>amount</code> contains the amount (in base units) burned.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="escrow-event">Escrow Event<a href="#escrow-event" class="hash-link" aria-label="Direct link to Escrow Event" title="Direct link to Escrow Event" translate="no">​</a></h3>
<p>Escrow events are emitted when tokens are escrowed, taken from escrow by the
protocol or reclaimed from escrow by the account owner.</p>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type EscrowEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Add     *AddEscrowEvent     `json:&quot;add,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Take    *TakeEscrowEvent    `json:&quot;take,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Reclaim *ReclaimEscrowEvent `json:&quot;reclaim,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>add</code> is set if the emitted event is an <em>Add Escrow</em> event.</li>
<li class=""><code>take</code> is set if the emitted event is a <em>Take Escrow</em> event.</li>
<li class=""><code>reclaim</code> is set if the emitted event is a <em>Reclaim Escrow</em> event.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="add-escrow-event">Add Escrow Event<a href="#add-escrow-event" class="hash-link" aria-label="Direct link to Add Escrow Event" title="Direct link to Add Escrow Event" translate="no">​</a></h4>
<p>The add escrow event is emitted when funds are escrowed.</p>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type AddEscrowEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Owner     Address           `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Escrow    Address           `json:&quot;escrow&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount    quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NewShares quantity.Quantity `json:&quot;new_shares&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>owner</code> contains the address of the source account.</li>
<li class=""><code>escrow</code> contains the address of the destination account the tokens are being
escrowed to.</li>
<li class=""><code>amount</code> contains the amount (in base units) escrowed.</li>
<li class=""><code>new_shares</code> contains the amount of shares created as a result of the added
escrow event. Can be zero in case of (non-commissioned) rewards, where stake
is added without new shares to increase share price.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="take-escrow-event">Take Escrow Event<a href="#take-escrow-event" class="hash-link" aria-label="Direct link to Take Escrow Event" title="Direct link to Take Escrow Event" translate="no">​</a></h4>
<p>The take escrow event is emitted by the protocol when escrowed funds are
slashed for whatever reason.</p>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type TakeEscrowEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Owner  Address                    `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount quantity.Quantity          `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DebondingAmount quantity.Quantity `json:&quot;debonding_amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>owner</code> contains the address of the account escrow has been taken from.</li>
<li class=""><code>amount</code> contains the total amount (in base units) taken. The debonding and
active escrow balances are slashed in equal proportions.</li>
<li class=""><code>debonding_amount</code> contains the amount (in base units) taken from just the
debonding escrow balance.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="reclaim-escrow-event">Reclaim Escrow Event<a href="#reclaim-escrow-event" class="hash-link" aria-label="Direct link to Reclaim Escrow Event" title="Direct link to Reclaim Escrow Event" translate="no">​</a></h4>
<p>The reclaim escrow event is emitted when a reclaim escrow operation completes
successfully (after the debonding period has passed).</p>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type ReclaimEscrowEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Owner  Address           `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Escrow Address           `json:&quot;escrow&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Shares quantity.Quantity `json:&quot;shares&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>owner</code> contains the address of the account that reclaimed tokens from escrow.</li>
<li class=""><code>escrow</code> contains the address of the account escrow has been reclaimed from.</li>
<li class=""><code>amount</code> contains the amount (in base units) reclaimed.</li>
<li class=""><code>shares</code> contains the amount of shares reclaimed.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="allowance-change-event">Allowance Change Event<a href="#allowance-change-event" class="hash-link" aria-label="Direct link to Allowance Change Event" title="Direct link to Allowance Change Event" translate="no">​</a></h3>
<p><strong>Body:</strong></p>
<div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type AllowanceChangeEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Owner        Address           `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Beneficiary  Address           `json:&quot;beneficiary&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Allowance    quantity.Quantity `json:&quot;allowance&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Negative     bool              `json:&quot;negative,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AmountChange quantity.Quantity `json:&quot;amount_change&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fields:</strong></p>
<ul>
<li class=""><code>owner</code> contains the address of the account owner where allowance has been
changed.</li>
<li class=""><code>beneficiary</code> contains the address of the beneficiary.</li>
<li class=""><code>allowance</code> contains the new total allowance.</li>
<li class=""><code>amount_change</code> contains the absolute amount the allowance has changed for.</li>
<li class=""><code>negative</code> specifies whether the allowance has been reduced rather than
increased.</li>
</ul>
<p>The event is emitted even if the new allowance is zero.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="consensus-parameters">Consensus Parameters<a href="#consensus-parameters" class="hash-link" aria-label="Direct link to Consensus Parameters" title="Direct link to Consensus Parameters" translate="no">​</a></h2>
<ul>
<li class=""><code>max_allowances</code> (uint32) specifies the maximum number of <a href="#allow" class="">allowances</a> an
account can store. Zero means that allowance functionality is disabled.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="test-vectors">Test Vectors<a href="#test-vectors" class="hash-link" aria-label="Direct link to Test Vectors" title="Direct link to Test Vectors" translate="no">​</a></h2>
<p>To generate test vectors for various staking <a class="" href="/core/consensus/transactions">transactions</a>, run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make -C go staking/gen_vectors</span><br></span></code></pre></div></div>
<p>For more information about the structure of the test vectors see the section
on <a class="" href="/core/consensus/test-vectors">Transaction Test Vectors</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/oasisprotocol/oasis-core/edit/stable/24.2.x/docs/consensus/services/staking.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-09-11T06:14:05.000Z" itemprop="dateModified">Sep 11, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/core/consensus/services/beacon"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Random Beacon</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/core/consensus/services/registry"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Registry</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tokens-and-base-units" class="table-of-contents__link toc-highlight">Tokens and Base Units</a></li><li><a href="#accounts" class="table-of-contents__link toc-highlight">Accounts</a><ul><li><a href="#user-accounts" class="table-of-contents__link toc-highlight">User Accounts</a></li><li><a href="#runtime-accounts" class="table-of-contents__link toc-highlight">Runtime Accounts</a></li><li><a href="#reserved-addresses" class="table-of-contents__link toc-highlight">Reserved Addresses</a></li><li><a href="#general" class="table-of-contents__link toc-highlight">General</a></li><li><a href="#escrow" class="table-of-contents__link toc-highlight">Escrow</a></li></ul></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#transfer" class="table-of-contents__link toc-highlight">Transfer</a></li><li><a href="#burn" class="table-of-contents__link toc-highlight">Burn</a></li><li><a href="#add-escrow" class="table-of-contents__link toc-highlight">Add Escrow</a></li><li><a href="#reclaim-escrow" class="table-of-contents__link toc-highlight">Reclaim Escrow</a></li><li><a href="#amend-commission-schedule" class="table-of-contents__link toc-highlight">Amend Commission Schedule</a></li><li><a href="#allow" class="table-of-contents__link toc-highlight">Allow</a></li><li><a href="#withdraw" class="table-of-contents__link toc-highlight">Withdraw</a></li></ul></li><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a><ul><li><a href="#transfer-event" class="table-of-contents__link toc-highlight">Transfer Event</a></li><li><a href="#burn-event" class="table-of-contents__link toc-highlight">Burn Event</a></li><li><a href="#escrow-event" class="table-of-contents__link toc-highlight">Escrow Event</a></li><li><a href="#allowance-change-event" class="table-of-contents__link toc-highlight">Allowance Change Event</a></li></ul></li><li><a href="#consensus-parameters" class="table-of-contents__link toc-highlight">Consensus Parameters</a></li><li><a href="#test-vectors" class="table-of-contents__link toc-highlight">Test Vectors</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Tools</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://explorer.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Explorer</a></li><li class="footer__item"><a href="https://wallet.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wallet</a></li><li class="footer__item"><a href="https://github.com/oasisprotocol/cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">CLI</a></li><li class="footer__item"><a href="https://status.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Build</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://faucet.testnet.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Testnet Faucet</a></li><li class="footer__item"><a href="https://playground.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground</a></li><li class="footer__item"><a href="https://api.docs.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Node</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/node/network/mainnet">Mainnet</a></li><li class="footer__item"><a class="footer__link-item" href="/node/network/testnet">Testnet</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://oasis.io/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://t.me/oasisprotocolcommunity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC35UFPcZ2F1wjPxhPrSsESQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li><li class="footer__item"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
<p xmlns:cc="http://creativecommons.org/ns#">Copyright © 2025
by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://oasis.net">
Oasis Protocol Foundation</a>. We <a href="https://oasisprotocol.org/privacy-policy" target="_blank" rel="noopener noreferrer">respect your privacy</a>.
Unless otherwise specified, all text and images on this website are licensed
under <a href="http://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
CC BY 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="/img/cc.svg"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="/img/by.svg"></a>.
This does not include the Oasis software and the code examples, both of which are
licensed under <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
Apache 2.0</a>. Built with &#x2665; and Docusaurus.</p></div></div></div></footer><!--$--><!--/$--></div>
</body>
</html>