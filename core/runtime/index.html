<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core/runtime/README" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Runtime Layer | Oasis Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.oasis.io/core/runtime/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Runtime Layer | Oasis Documentation"><meta data-rh="true" name="description" content="Runtime Layer"><meta data-rh="true" property="og:description" content="Runtime Layer"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.oasis.io/core/runtime/"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/core/runtime/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/core/runtime/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.e55d6d10.css">
<script src="/assets/js/runtime~main.296dd946.js" defer="defer"></script>
<script src="/assets/js/main.1fc431be.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/img/logo_dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Oasis Docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.svg" alt="Oasis Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/build/">Build</a><a class="navbar__item navbar__link" href="/general/">Learn</a><a class="navbar__item navbar__link" href="/get-involved/">Get Involved</a><a class="navbar__item navbar__link" href="/node/">Run Node</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/core/">Develop Core</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub repository" aria-label="GitHub repository"></a><a href="https://oasis.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-www-link" title="Oasis website" aria-label="Oasis website"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/core/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link" href="/core/development-setup"><span title="Development Setup" class="categoryLinkLabel_W154">Development Setup</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/core/development-setup/build-environment-setup-and-building"><span title="Build Environment Setup and Building" class="categoryLinkLabel_W154">Build Environment Setup and Building</span></a><button aria-label="Expand sidebar category &#x27;Build Environment Setup and Building&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/core/development-setup/running-tests-and-development-networks"><span title="Running Tests and Development Networks" class="categoryLinkLabel_W154">Running Tests and Development Networks</span></a><button aria-label="Expand sidebar category &#x27;Running Tests and Development Networks&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--active" href="/core/high-level-components"><span title="High-Level Components" class="categoryLinkLabel_W154">High-Level Components</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/core/consensus/"><span title="Consensus Layer" class="categoryLinkLabel_W154">Consensus Layer</span></a><button aria-label="Expand sidebar category &#x27;Consensus Layer&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/core/runtime/"><span title="Runtime Layer" class="categoryLinkLabel_W154">Runtime Layer</span></a><button aria-label="Collapse sidebar category &#x27;Runtime Layer&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/runtime/runtime-host-protocol"><span title="Runtime Host Protocol" class="linkLabel_WmDU">Runtime Host Protocol</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/runtime/identifiers"><span title="Runtime IDs" class="linkLabel_WmDU">Runtime IDs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/runtime/messages"><span title="Runtime Messages" class="linkLabel_WmDU">Runtime Messages</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/core/oasis-node"><span title="Oasis Node" class="categoryLinkLabel_W154">Oasis Node</span></a><button aria-label="Expand sidebar category &#x27;Oasis Node&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link" href="/core/common-functionality"><span title="Common Functionality" class="categoryLinkLabel_W154">Common Functionality</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/encoding"><span title="Encoding" class="linkLabel_WmDU">Encoding</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/crypto"><span title="Cryptography" class="linkLabel_WmDU">Cryptography</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/core/authenticated-grpc"><span title="Protocols" class="categoryLinkLabel_W154">Protocols</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/mkvs"><span title="Merklized Key-Value Store (MKVS)" class="linkLabel_WmDU">Merklized Key-Value Store (MKVS)</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link" href="/core/processes"><span title="Processes" class="categoryLinkLabel_W154">Processes</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/release-process"><span title="Release Process" class="linkLabel_WmDU">Release Process</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/versioning"><span title="Versioning" class="linkLabel_WmDU">Versioning</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/SECURITY"><span title="Security" class="linkLabel_WmDU">Security</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/adrs"><span title="ADRs" class="linkLabel_WmDU">ADRs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://api.docs.oasis.io/js/client" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Core Client TypeScript API" class="linkLabel_WmDU">Core Client TypeScript API</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Core Client Go API" class="linkLabel_WmDU">Core Client Go API</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Runtime Layer</h1></header>
<p><img decoding="async" loading="lazy" alt="Runtime Layer" src="/assets/images/oasis-core-runtime-details-acaba7d29c87a75333e050c8fe4d07ae.svg" class="img_ev3q"></p>
<p>The Oasis Core runtime layer enables independent <em>runtimes</em> to schedule and
execute stateful computations and commit result summaries to the
<a class="" href="/core/consensus/">consensus layer</a>. In addition to <a class="" href="/core/consensus/services/roothash">verifying and storing</a> the canonical runtime
state summaries the <a class="" href="/core/consensus/">consensus layer</a> also serves as the <a class="" href="/core/consensus/services/registry">registry</a> for node and
runtime metadata, a <a class="" href="/core/consensus/services/scheduler">scheduler</a> that elects runtime compute committees and a
coordinator for <a class="" href="/core/consensus/services/keymanager">key manager replication</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="runtimes">Runtimes<a href="#runtimes" class="hash-link" aria-label="Direct link to Runtimes" title="Direct link to Runtimes" translate="no">​</a></h2>
<p>A <em>runtime</em> is effectively a replicated application with shared state. The
application can receive transactions from clients and based on those it can
perform arbitrary state mutations. This replicated state and application logic
exists completely separate from the consensus layer state and logic, but it
leverages the same consensus layer for finality with the consensus layer
providing the source of canonical state. Multiple runtimes can share the same
consensus layer.</p>
<p>In Oasis Core a runtime can be any executable that speaks the
<a class="" href="/core/runtime/runtime-host-protocol">Runtime Host Protocol</a> which is used to communicate between a runtime and an
Oasis Core Node. The executable usually runs in a sandboxed environment with
the only external interface being the Runtime Host Protocol. The execution
environment currently includes a sandbox based on Linux namespaces and SECCOMP
optionally combined with Intel SGX enclaves for confidential computation.</p>
<p><img decoding="async" loading="lazy" alt="Runtime Execution" src="/assets/images/oasis-core-runtime-execution-502d059c83dd21c3135c993c339f9240.svg" class="img_ev3q"></p>
<p>In the future this may be expanded with supporting running each runtime in its
own virtual machine and with other confidential computing technologies.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="operation-model">Operation Model<a href="#operation-model" class="hash-link" aria-label="Direct link to Operation Model" title="Direct link to Operation Model" translate="no">​</a></h2>
<p>The relationship between <a class="" href="/core/consensus/">consensus layer services</a> and runtime services is best
described by a simple example of a &quot;Runtime A&quot; that is created and receives
transactions from clients (also see the figure above for an overview).</p>
<ol>
<li class="">
<p>The runtime first needs to be created. In addition to developing code that
will run in the runtime itself, we also need to specify some metadata related
to runtime operation, including a unique <a class="" href="/core/runtime/identifiers">runtime identifier</a>, and then
<a class="" href="/core/consensus/services/registry#register-runtime">register the runtime</a>.</p>
</li>
<li class="">
<p>We also need some nodes that will actually run the runtime executable and
process any transactions from clients (compute nodes). These nodes currently
need to have the executable available locally and must be configured as
compute nodes.</p>
</li>
<li class="">
<p>In addition to compute nodes a runtime also needs storage nodes to store its
state.</p>
</li>
<li class="">
<p>Both kinds of <a class="" href="/core/consensus/services/registry#register-node">nodes will register</a> on the consensus layer announcing their
willingness to participate in the operation of Runtime A.</p>
</li>
<li class="">
<p>After an <a class="" href="/core/consensus/services/epochtime">epoch transition</a> the <a class="" href="/core/consensus/services/scheduler">committee scheduler</a> service will elect
registered compute and storage nodes into different committees based on role.
Elections are randomized based on entropy provided by the <a class="" href="/core/consensus/services/beacon">random beacon</a>.</p>
</li>
<li class="">
<p>A client may submit transactions by querying the consensus layer to get the
current executor committee for a given runtime, connect to it, publish
transactions and wait for finalization by the consensus layer. In order to
make it easier to write clients, the Oasis Node exposes a runtime
<a class="" href="/core/oasis-node/rpc">client RPC API</a> that encapsulates all this functionality in a <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/runtime/client/api?tab=doc#RuntimeClient.SubmitTx" target="_blank" rel="noopener noreferrer" class=""><code>SubmitTx</code></a>
call.</p>
</li>
<li class="">
<p>The transactions are batched and proceed through the transaction processing
pipeline. At the end, results are persisted to storage and the
<a class="" href="/core/consensus/services/roothash">roothash service</a> in the consensus layer finalizes state after verifying
that computation was performed correctly and state was correctly persisted.</p>
</li>
<li class="">
<p>The compute nodes are ready to accept the next batch and the process can
repeat from step 6.</p>
</li>
</ol>
<p>Note that the above example describes the <em>happy path</em>, a scenario where there
are no failures. Described steps mention things like verifying that computation
was performed <em>correctly</em> and that state was <em>correctly stored</em>. How does the
consensus layer actually know that?</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="discrepancy-detection-and-resolution">Discrepancy Detection and Resolution<a href="#discrepancy-detection-and-resolution" class="hash-link" aria-label="Direct link to Discrepancy Detection and Resolution" title="Direct link to Discrepancy Detection and Resolution" translate="no">​</a></h3>
<p>The key idea behind ensuring integrity of runtime computations is replicated
computation with discrepancy detection. This basically means that any
computation (e.g., execution of a transaction) is replicated among multiple
compute nodes. They all execute the exact same functions and produce results,
which must all match. If they don&#x27;t (e.g., if even a single node produces
different results), this is treated as a discrepancy.</p>
<p>In case of a discrepancy, the computation must be repeated using a separate
larger compute committee which decides what the correct results were. Since all
commitments are attributable to compute nodes, any node(s) that produced
incorrect results may be subject to having their stake slashed and may be
removed from future committees.</p>
<p>Given the above, an additional constraint with replicated runtimes is that they
must be fully deterministic, meaning that a computation operating on the same
initial state executing the same inputs (transactions) must always produce the
same outputs and new state. In case a runtime&#x27;s execution exhibits
non-determinism this will manifest itself as discrepancies since nodes will
derive different results when replicating computation.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="compute-committee-roles-and-commitments">Compute Committee Roles and Commitments<a href="#compute-committee-roles-and-commitments" class="hash-link" aria-label="Direct link to Compute Committee Roles and Commitments" title="Direct link to Compute Committee Roles and Commitments" translate="no">​</a></h3>
<p>A compute node can be elected into an executor committee and may have one of the
following roles:</p>
<ul>
<li class="">Primary executor node. At any given round a single node is selected among all
the primary executor nodes to be a <em>transaction scheduler node</em> (roughly equal
to the role of a <em>block proposer</em>).</li>
<li class="">Backup executor node. Backup nodes can be activated by the consensus layer in
case it determines that there is a discrepancy.</li>
</ul>
<p>The size of the primary and backup executor committees, together with other
related parameters, can be configured on a per-runtime basis. The <em>primary</em>
nodes are the ones that will batch incoming transactions into blocks and execute
the state transitions to derive the new state root. They perform this in a
replicated fashion where all the primary executor nodes execute the same inputs
(transactions) on the same initial state.</p>
<p>After execution they will sign <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/roothash/api/commitment?tab=doc" target="_blank" rel="noopener noreferrer" class="">cryptographic commitments</a> specifying the
inputs, the initial state, the outputs and the resulting state. In case
computation happens inside a trusted execution environment (TEE) like Intel SGX,
the commitment will also include a platform attestation proving that the
computation took place in a given TEE.</p>
<p>The <a class="" href="/core/consensus/services/roothash">roothash service</a> in the consensus layer will collect commitments and
verify that all nodes have indeed computed the same result. As mentioned in case
of discrepancies it will instruct nodes elected as <em>backups</em> to repeat the
computation.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="storage-receipts">Storage Receipts<a href="#storage-receipts" class="hash-link" aria-label="Direct link to Storage Receipts" title="Direct link to Storage Receipts" translate="no">​</a></h3>
<p>All runtime persistent state is stored by storage nodes. These provide a
<a class="" href="/core/mkvs">Merklized Key-Value Store (MKVS)</a> to compute nodes. The MKVS stores immutable
state cryptographically summarized by a single root hash. When a storage node
stores a given state update, it signs a receipt stating that it is storing a
specific root. These receipts are verified by the <a class="" href="/core/consensus/services/roothash">roothash service</a> before
accepting a commitment from a compute node.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="suspending-runtimes">Suspending Runtimes<a href="#suspending-runtimes" class="hash-link" aria-label="Direct link to Suspending Runtimes" title="Direct link to Suspending Runtimes" translate="no">​</a></h3>
<p>Since periodic maintenance work must be performed on each epoch transition
(e.g., electing runtime committees), fees for that maintenance are paid by any
nodes that register to perform work for a specific runtime. Fees are pre-paid
for the number of epochs a node registers for. If there are no committees for a
runtime on epoch transition, the runtime is suspended for the epoch.
The runtime is also suspended in case the registering entity no longer has
enough stake to cover the entity and runtime deposits. The runtime will be
resumed on the epoch transition if runtime nodes will register and the
registering entity will have enough stake.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="emitting-messages">Emitting Messages<a href="#emitting-messages" class="hash-link" aria-label="Direct link to Emitting Messages" title="Direct link to Emitting Messages" translate="no">​</a></h3>
<p>Runtimes may <a class="" href="/core/runtime/messages">emit messages</a> to instruct the consensus layer what to do on their
behalf. This makes it possible for runtimes to <a class="" href="/core/consensus/services/staking#runtime-accounts">own staking accounts</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/oasisprotocol/oasis-core/edit/stable/24.2.x/docs/runtime/README.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-09-11T06:14:05.000Z" itemprop="dateModified">Sep 11, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/core/consensus/test-vectors"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Transaction Test Vectors</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/core/runtime/runtime-host-protocol"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Runtime Host Protocol</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#runtimes" class="table-of-contents__link toc-highlight">Runtimes</a></li><li><a href="#operation-model" class="table-of-contents__link toc-highlight">Operation Model</a><ul><li><a href="#discrepancy-detection-and-resolution" class="table-of-contents__link toc-highlight">Discrepancy Detection and Resolution</a></li><li><a href="#compute-committee-roles-and-commitments" class="table-of-contents__link toc-highlight">Compute Committee Roles and Commitments</a></li><li><a href="#storage-receipts" class="table-of-contents__link toc-highlight">Storage Receipts</a></li><li><a href="#suspending-runtimes" class="table-of-contents__link toc-highlight">Suspending Runtimes</a></li><li><a href="#emitting-messages" class="table-of-contents__link toc-highlight">Emitting Messages</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Tools</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://explorer.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Explorer</a></li><li class="footer__item"><a href="https://wallet.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wallet</a></li><li class="footer__item"><a href="https://github.com/oasisprotocol/cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">CLI</a></li><li class="footer__item"><a href="https://status.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Build</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://faucet.testnet.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Testnet Faucet</a></li><li class="footer__item"><a href="https://playground.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground</a></li><li class="footer__item"><a href="https://api.docs.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Node</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/node/network/mainnet">Mainnet</a></li><li class="footer__item"><a class="footer__link-item" href="/node/network/testnet">Testnet</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://oasis.io/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://t.me/oasisprotocolcommunity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC35UFPcZ2F1wjPxhPrSsESQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li><li class="footer__item"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
<p xmlns:cc="http://creativecommons.org/ns#">Copyright © 2025
by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://oasis.net">
Oasis Protocol Foundation</a>. We <a href="https://oasisprotocol.org/privacy-policy" target="_blank" rel="noopener noreferrer">respect your privacy</a>.
Unless otherwise specified, all text and images on this website are licensed
under <a href="http://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
CC BY 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="/img/cc.svg"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="/img/by.svg"></a>.
This does not include the Oasis software and the code examples, both of which are
licensed under <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
Apache 2.0</a>. Built with &#x2665; and Docusaurus.</p></div></div></div></footer><!--$--><!--/$--></div>
</body>
</html>