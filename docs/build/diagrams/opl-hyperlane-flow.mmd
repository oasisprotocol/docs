flowchart TB
 subgraph Origin["Origin"]
        Sender["Sender"]
        M_O[("Mailbox")]
  end
 subgraph Destination["Destination"]
        Recipient["Recipient"]
        M_D[("Mailbox")]
        ISM["InterchainSecurityModule"]
  end
    Sender -- "1.dispatch(destination, recipient, body)" --> M_O
    M_O -. "2.emit dispatch(sender, destination, recipient, body)" .-> Relayer(("Relayer"))
    Relayer -- "3.process(metadata, message)" --> M_D
    M_D -. "4.interchainSecurityModule()" .-> Recipient
    M_D -- "5.verify(metadata, message)" --> ISM
    M_D -- "6.handle(origin, sender, body)" --> Recipient

    style Sender fill:#efab17
    style Recipient fill:#efab17
