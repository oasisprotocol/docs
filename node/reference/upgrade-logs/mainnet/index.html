<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-node/reference/upgrade-logs/mainnet" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Mainnet Upgrade Log | Oasis Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.oasis.io/node/reference/upgrade-logs/mainnet"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Mainnet Upgrade Log | Oasis Documentation"><meta data-rh="true" name="description" content="For each upgrade of the Oasis Network, we are tracking important changes for"><meta data-rh="true" property="og:description" content="For each upgrade of the Oasis Network, we are tracking important changes for"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.oasis.io/node/reference/upgrade-logs/mainnet"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/node/reference/upgrade-logs/mainnet" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/node/reference/upgrade-logs/mainnet" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.e55d6d10.css">
<script src="/assets/js/runtime~main.296dd946.js" defer="defer"></script>
<script src="/assets/js/main.1fc431be.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/img/logo_dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Oasis Docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.svg" alt="Oasis Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/build/">Build</a><a class="navbar__item navbar__link" href="/general/">Learn</a><a class="navbar__item navbar__link" href="/get-involved/">Get Involved</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/node/">Run Node</a><a class="navbar__item navbar__link" href="/core/">Develop Core</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub repository" aria-label="GitHub repository"></a><a href="https://oasis.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-www-link" title="Oasis website" aria-label="Oasis website"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/node/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link" href="/node/network/"><span title="Network Information" class="categoryLinkLabel_W154">Network Information</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/network/mainnet"><span title="Mainnet" class="linkLabel_WmDU">Mainnet</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/network/testnet"><span title="Testnet" class="linkLabel_WmDU">Testnet</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link" href="/node/run-your-node/"><span title="Run Your Node" class="categoryLinkLabel_W154">Run Your Node</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/node/run-your-node/prerequisites"><span title="Prerequisites" class="categoryLinkLabel_W154">Prerequisites</span></a><button aria-label="Expand sidebar category &#x27;Prerequisites&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/validator-node"><span title="Validator Node" class="linkLabel_WmDU">Validator Node</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/non-validator-node"><span title="Non-validator Node" class="linkLabel_WmDU">Non-validator Node</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/seed-node"><span title="Seed Node" class="linkLabel_WmDU">Seed Node</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/archive-node"><span title="Archive Node" class="linkLabel_WmDU">Archive Node</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/paratime-node"><span title="ParaTime Node" class="linkLabel_WmDU">ParaTime Node</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/node/run-your-node/paratime-client-node"><span title="ParaTime Client Node" class="categoryLinkLabel_W154">ParaTime Client Node</span></a><button aria-label="Expand sidebar category &#x27;ParaTime Client Node&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/rofl-node"><span title="ROFL Node" class="linkLabel_WmDU">ROFL Node</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/node/run-your-node/keymanager-node/"><span title="Key Manager Node" class="categoryLinkLabel_W154">Key Manager Node</span></a><button aria-label="Expand sidebar category &#x27;Key Manager Node&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/sentry-node"><span title="Sentry Node" class="linkLabel_WmDU">Sentry Node</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/node/run-your-node/maintenance"><span title="Maintenance" class="categoryLinkLabel_W154">Maintenance</span></a><button aria-label="Expand sidebar category &#x27;Maintenance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/node/run-your-node/advanced"><span title="Advanced" class="categoryLinkLabel_W154">Advanced</span></a><button aria-label="Expand sidebar category &#x27;Advanced&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/node/web3"><span title="Web3 Gateway" class="linkLabel_WmDU">Web3 Gateway</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/node/grpc"><span title="gRPC Proxy" class="linkLabel_WmDU">gRPC Proxy</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/node/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Collapse sidebar category &#x27;Reference&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/reference/genesis-doc"><span title="Genesis Document" class="linkLabel_WmDU">Genesis Document</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/node/reference/upgrades"><span title="Network Upgrades" class="categoryLinkLabel_W154">Network Upgrades</span></a><button aria-label="Expand sidebar category &#x27;Network Upgrades&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/node/reference/upgrade-logs"><span title="Upgrade Logs" class="categoryLinkLabel_W154">Upgrade Logs</span></a><button aria-label="Collapse sidebar category &#x27;Upgrade Logs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/node/reference/upgrade-logs/mainnet"><span title="Mainnet" class="linkLabel_WmDU">Mainnet</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/node/reference/upgrade-logs/testnet"><span title="Testnet" class="linkLabel_WmDU">Testnet</span></a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Mainnet Upgrade Log</h1></header>
<p>For each upgrade of the Oasis Network, we are tracking important changes for
node operators&#x27; deployments.</p>
<p>They are enumerated and explained in this document.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="eden-upgrade">2023-11-29 (10:02 UTC) - Eden Upgrade<a href="#eden-upgrade" class="hash-link" aria-label="Direct link to 2023-11-29 (10:02 UTC) - Eden Upgrade" title="Direct link to 2023-11-29 (10:02 UTC) - Eden Upgrade" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>For a detailed view of the Eden Upgrade process, please refer to the
<a class="" href="/node/reference/upgrades/eden-upgrade">Eden Upgrade</a> page.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The Oasis Core 23.0.x binary in our published releases is built only for Ubuntu
22.04 (GLIBC&gt;=2.32). You&#x27;ll have to build it yourself if you&#x27;re using prior
Ubuntu versions (or other distributions using older system libraries).</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration-changes">Configuration Changes<a href="#configuration-changes" class="hash-link" aria-label="Direct link to Configuration Changes" title="Direct link to Configuration Changes" translate="no">​</a></h3>
<p>The node configuration has been refactored so that everything is now configured
via a YAML configuration file and <strong>configuring via command-line options is no
longer supported</strong>.</p>
<p>Some configuration options have changed and so the configuration file needs to
be updated. To make this step easier, a command-line tool has been provided that
will perform most of the changes automatically. You can run it with:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node config migrate --in config.yml --out new-config.yml</span><br></span></code></pre></div></div>
<p>The migration subcommand logs the various changes it makes and warns you if a
config option is no longer supported, etc. At the end, any unknown sections of
the input config file are printed to the terminal to give you a chance to review
them and make manual changes if required.</p>
<p>Note that the migration subcommand does not preserve comments and order of
sections from the input YAML config file. You should always carefully read the
output of this command, as well as compare the generated config file with the
original before using it.</p>
<p>After you are satisfied with the new configuration file, replace the old file
with the new one as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mv new-config.yml config.yml</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The configuration format for seed nodes has changed and it now requires the
node&#x27;s P2P public key to be used. In case your old configuration file contains
known Mainnet seed nodes, this transformation is performed automatically.</p><p>However, if it contains unknown seed nodes then the conversion did not happen
automatically and you may need to obtain the seed node&#x27;s P2P public key. For
Mainnet you can use the following addresses:</p><ul>
<li class=""><code>TBD</code></li>
<li class=""><code>TBD</code></li>
</ul><p>Please be aware that every seed node should be configured to listen on two
distinct ports. One is dedicated to peer discovery within the CometBFT P2P
network, while the other is used to bootstrap the Oasis P2P network.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-directory-changes">Data Directory Changes<a href="#data-directory-changes" class="hash-link" aria-label="Direct link to Data Directory Changes" title="Direct link to Data Directory Changes" translate="no">​</a></h3>
<p>The subdirectory (located inside the node&#x27;s data directory) used to store
consensus-related data, previously called <code>tendermint</code> (after the consensus
layer protocol backend) has been renamed to <code>consensus</code> in Oasis Core 23.0.x. If
any of your scripts rely on specific directory names, please make sure to update
them to reflect the changed sdirectory name.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="state-changes">State Changes<a href="#state-changes" class="hash-link" aria-label="Direct link to State Changes" title="Direct link to State Changes" translate="no">​</a></h3>
<p>The following parts of the genesis document will be updated:</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>For a more detailed explanation of the parameters below, see the
<a class="" href="/node/reference/genesis-doc#parameters">Genesis Document</a> docs.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>All state changes will be done automatically with the migration command provided
by the new version of <code>oasis-node</code>. It can be used as follows to derive the same
genesis file from an existing state dump at the correct height (assuming there
is a <code>genesis.json</code> present in the current working directory):</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node genesis migrate --genesis.new_chain_id oasis-4</span><br></span></code></pre></div></div></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="general">General<a href="#general" class="hash-link" aria-label="Direct link to General" title="Direct link to General" translate="no">​</a></h4>
<ul>
<li class="">
<p><strong><code>chain_id</code></strong> will be set to <code>oasis-4</code>.</p>
</li>
<li class="">
<p><strong><code>halt_epoch</code></strong> will be removed as it is no longer used.</p>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="registry">Registry<a href="#registry" class="hash-link" aria-label="Direct link to Registry" title="Direct link to Registry" translate="no">​</a></h4>
<ul>
<li class="">
<p><strong><code>registry.runtimes[].txn_scheduler.propose_batch_timeout</code></strong> specifies how
long to wait before accepting proposal from the next backup scheduler. It will
be set to <code>5000000000</code> (5 seconds). Previously the value was represented in
the number of consensus layer blocks.</p>
</li>
<li class="">
<p><strong><code>registry.params.gas_costs.prove_freshness</code></strong> specifies the cost of the
freshness proof transaction. It will be set to <code>1000</code>.</p>
</li>
<li class="">
<p><strong><code>registry.params.gas_costs.update_keymanager</code></strong> specifies the cost of the
keymanager policy update transaction. It will be removed as the parameter has
been moved under <code>keymanager.params.gas_costs.update_policy</code>.</p>
</li>
<li class="">
<p><strong><code>registry.params.tee_features</code></strong> specify various TEE features supported by
the consensus layer registry service. These will be set to the following
values to activate the new features:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;tee_features&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sgx&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;pcs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;signed_attestations&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;max_attestation_age&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;freshness_proofs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
<li class="">
<p><strong><code>registry.params.max_runtime_deployments</code></strong> specifies the maximum number of
runtime deployments that can be specified in the runtime descriptor. It will
be set to <code>5</code>.</p>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-hash">Root Hash<a href="#root-hash" class="hash-link" aria-label="Direct link to Root Hash" title="Direct link to Root Hash" translate="no">​</a></h4>
<ul>
<li class=""><strong><code>roothash.params.max_past_roots_stored</code></strong> specifies the maximum number of
past runtime state roots that are stored in consensus state for each runtime.
It will be set to <code>1200</code>.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="staking">Staking<a href="#staking" class="hash-link" aria-label="Direct link to Staking" title="Direct link to Staking" translate="no">​</a></h4>
<ul>
<li class="">
<p><strong><code>staking.params.commission_schedule_rules.min_commission_rate</code></strong> specifies
the minimum commission rate. It will be set to <code>0</code> to maintain the existing
behavior.</p>
</li>
<li class="">
<p><strong><code>staking.params.thresholds.node-observer</code></strong> specifies the stake threshold
for registering an observer node. It will be set to <code>100000000000</code> base units
(or <code>100</code> tokens), same as for existing compute nodes.</p>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-manager">Key Manager<a href="#key-manager" class="hash-link" aria-label="Direct link to Key Manager" title="Direct link to Key Manager" translate="no">​</a></h4>
<ul>
<li class="">
<p><strong><code>keymanager.params.gas_costs</code></strong> specify the cost of key manager
transactions. These will be set to the following values:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;gas_costs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;publish_ephemeral_secret&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;publish_master_secret&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;update_policy&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="random-beacon">Random Beacon<a href="#random-beacon" class="hash-link" aria-label="Direct link to Random Beacon" title="Direct link to Random Beacon" translate="no">​</a></h4>
<ul>
<li class=""><strong><code>beacon.base</code></strong> is the network&#x27;s starting epoch. It will be set to the epoch
of Mainnet&#x27;s state dump + 1, <code>28017</code>.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="governance">Governance<a href="#governance" class="hash-link" aria-label="Direct link to Governance" title="Direct link to Governance" translate="no">​</a></h4>
<ul>
<li class=""><strong><code>governance.params.enable_change_parameters_proposal</code></strong> specifies whether
parameter change governance proposals are allowed. It will be set to <code>true</code>.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="consensus">Consensus<a href="#consensus" class="hash-link" aria-label="Direct link to Consensus" title="Direct link to Consensus" translate="no">​</a></h4>
<ul>
<li class=""><strong><code>consensus.params.max_block_size</code></strong> specifies the maximum block size in the
consensus layer. It will be set to <code>1048576</code> (1 MiB).</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="other">Other<a href="#other" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other" translate="no">​</a></h4>
<ul>
<li class="">
<p><strong><code>extra_data</code></strong> will be set back to the value in the <a href="https://github.com/oasisprotocol/mainnet-artifacts/releases/tag/2020-11-18" target="_blank" rel="noopener noreferrer" class="">Mainnet genesis file</a>
to include the Oasis Network&#x27;s genesis quote:</p>
<p><em>”</em><a href="https://en.wikipedia.org/wiki/Quis_custodiet_ipsos_custodes%3F" target="_blank" rel="noopener noreferrer" class=""><em>Quis custodiet ipsos custodes?</em></a><em>” [submitted by Oasis
Community Member Daniyar Borangaziyev]:</em></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;extra_data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;quote&quot;: &quot;UXVpcyBjdXN0b2RpZXQgaXBzb3MgY3VzdG9kZXM/IFtzdWJtaXR0ZWQgYnkgT2FzaXMgQ29tbXVuaXR5IE1lbWJlciBEYW5peWFyIEJvcmFuZ2F6aXlldl0=&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="damask-upgrade">2022-04-11 (8:30 UTC) - Damask Upgrade<a href="#damask-upgrade" class="hash-link" aria-label="Direct link to 2022-04-11 (8:30 UTC) - Damask Upgrade" title="Direct link to 2022-04-11 (8:30 UTC) - Damask Upgrade" translate="no">​</a></h2>
<ul>
<li class=""><strong>Upgrade height:</strong> upgrade is scheduled to happen at epoch <strong>13402</strong>.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>We expect the Mainnet network to reach this epoch at around 2022-04-11 8:30
UTC.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions---voting">Instructions - Voting<a href="#instructions---voting" class="hash-link" aria-label="Direct link to Instructions - Voting" title="Direct link to Instructions - Voting" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p><strong>Voting for the upgrade proposal will end at epoch 13152. We expect the Mainnet
network to reach this epoch at around 2022-03-31 21:00 UTC</strong>.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>At this time only entities which have active validator nodes scheduled in the
validator set are eligible to vote for governance proposals.</p></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>At least <strong>75%</strong> of the total <strong>voting power</strong> of the validator set needs to
cast a vote on the upgrade proposal for the result to be valid.</p><p>At least <strong>90%</strong> of the vote needs to be <strong>yes</strong> votes for a proposal to be
accepted.</p></div></div>
<p>The Oasis Protocol Foundation has submitted an <a class="" href="/core/consensus/services/governance#submit-proposal">upgrade governance proposal</a>
with the following contents:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">&quot;v&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;handler&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mainnet-upgrade-2022-04-11&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;target&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;consensus_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;runtime_host_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;runtime_committee_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;epoch&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13402</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>To view the proposal yourself, you can run the following command on your online
Oasis Node:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node governance list_proposals -a $ADDR</span><br></span></code></pre></div></div>
<p>where <code>$ADDR</code> represents the path to the internal Oasis Node UNIX socket
prefixed with <code>unix:</code> (e.g.<code>unix:/serverdir/node/internal.sock</code>).</p>
<p>The output should look like:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;submitter&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;oasis1qpydpeyjrneq20kh2jz2809lew6d9p64yymutlee&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;state&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;active&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;deposit&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10000000000000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">&quot;upgrade&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;v&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;handler&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mainnet-upgrade-2022-04-11&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;target&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">&quot;consensus_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">&quot;runtime_host_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">&quot;runtime_committee_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;epoch&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13402</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;created_at&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12984</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;closes_at&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13152</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>Obtain <a class="" href="/build/tools/cli/account#show">your entity&#x27;s nonce</a> and store it in the <code>NONCE</code> variable. You can do
that by running:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ENTITY_DIR=&lt;PATH</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">TO</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">YOUR</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ENTITY</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ADDRESS=$(oasis</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node stake pubkey2address </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">public_key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $(cat $ENTITY_DIR/entity.json </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> jq .id </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">r))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NONCE=$(oasis</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node stake account nonce </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stake.account.address $ADDRESS </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a $ADDR)</span><br></span></code></pre></div></div>
<p>where <code>&lt;PATH-TO-YOUR-ENTITY&gt;</code> is the path to your entity&#x27;s descriptor, e.g.
<code>/serverdir/node/entity/</code>.</p>
<p>To vote for the proposal, use the following command to generate a suitable
transaction:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node governance gen_cast_vote \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;${TX_FLAGS[@]}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --vote.proposal.id 2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --vote yes \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.file tx_cast_vote.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.nonce $NONCE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.fee.gas 2000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.fee.amount 2000</span><br></span></code></pre></div></div>
<p>where <code>TX_FLAGS</code> refer to previously set base and signer flags as described in
the <a class="" href="/core/oasis-node/cli">Oasis node CLI Tools Setup</a> doc.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>If you use a Ledger-signer backed entity, you will need to install version 2.3.2
of the Oasis App as described in <a class="" href="/general/manage-tokens/holding-rose-tokens/ledger-wallet">Installing Oasis App on Your Ledger Wallet</a>.</p><p>Note that the previous version of the Oasis App available through Ledger Live,
version 1.8.2, doesn&#x27;t support signing the <code>governance.CastVote</code> transaction
type.</p></div></div>
<p>To submit the generated transaction, copy <code>tx_cast_vote.json</code> to the online
Oasis node and submit it from there:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node consensus submit_tx \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -a $ADDR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.file tx_cast_vote.json</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions---before-upgrade">Instructions - Before upgrade<a href="#instructions---before-upgrade" class="hash-link" aria-label="Direct link to Instructions - Before upgrade" title="Direct link to Instructions - Before upgrade" translate="no">​</a></h3>
<p>This upgrade will upgrade <strong>Oasis Core</strong> to the <strong>22.1.x release series</strong> which
<strong>no longer allow running Oasis Node</strong> (i.e. the <code>oasis-node</code> binary)
<strong>as root</strong> (effective user ID of 0).</p>
<p>Running network accessible services as the root user is extremely bad for
system security as a general rule. While it would be &quot;ok&quot; if we could drop
privileges, <code>syscall.AllThreadsSyscall</code> does not work if the binary uses <code>cgo</code>
at all.</p>
<p>Nothing in Oasis Node will ever require elevated privileges.
Attempting to run the <code>oasis-node</code> process as the root user will now terminate
immediately on startup.</p>
<p>While there may be specific circumstances where it is safe to run network
services with the effective user ID set to 0, the overwhelming majority of cases
where this is done is a misconfiguration.</p>
<p>Please, follow our <a class="" href="/node/run-your-node/prerequisites/system-configuration#create-a-user">Changing Your Setup to Run Oasis Services with Non-root
System User</a> guide for steps-by-step instructions on how
to update your system.</p>
<p>If the previous behavior is required, the binary must be run in unsafe/debug
mode (via the intentionally undocumented flag), and <code>debug.allow_root</code> must also
be set.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions---upgrade-day">Instructions - Upgrade day<a href="#instructions---upgrade-day" class="hash-link" aria-label="Direct link to Instructions - Upgrade day" title="Direct link to Instructions - Upgrade day" translate="no">​</a></h3>
<p>Following steps should be performed on <strong>2022-04-11</strong> only after the network has
reached the upgrade epoch and has halted:</p>
<ol>
<li class="">Download the genesis file published in the <a href="https://github.com/oasisprotocol/mainnet-artifacts/releases/tag/2022-04-11" target="_blank" rel="noopener noreferrer" class="">Damask upgrade release</a>.</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Mainnet state at epoch <strong>13402</strong> will be exported and migrated to a 22.1.x
compatible genesis file.</p><p>Upgrade genesis file will be published on the above link soon after reaching the
upgrade epoch.</p></div></div>
<ol start="2">
<li class="">
<p>Verify the provided Damask upgrade genesis file by comparing it to network
state dump.</p>
<p>The state changes are described in the <a class="" href="/node/reference/upgrades/damask-upgrade#proposed-state-changes">Damask Upgrade</a> document.</p>
<p>See instructions in the <a class="" href="/node/run-your-node/maintenance/handling-network-upgrades#verify-genesis">Handling Network Upgrades</a> guide.</p>
</li>
<li class="">
<p>Replace the old genesis file with the new Damask upgrade genesis file.</p>
</li>
<li class="">
<p>Ensure your node will remain stopped by disabling auto-starting via your
process manager (e.g., <a href="https://systemd.io/" target="_blank" rel="noopener noreferrer" class="">systemd</a> or <a href="http://supervisord.org/" target="_blank" rel="noopener noreferrer" class="">Supervisor</a>)</p>
</li>
<li class="">
<p>Replace the old version of Oasis Node with version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v22.1.3" target="_blank" rel="noopener noreferrer" class="">22.1.3</a>.</p>
</li>
<li class="">
<p><a class="" href="/node/run-your-node/maintenance/wiping-node-state#state-wipe-and-keep-node-identity">Wipe state</a>.</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>State of ParaTimes/runtimes is not affected by this upgrade and should NOT be
wiped.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>We recommend <strong>backing up the pre-Damask consensus state</strong> so all the
transactions and history are not permanently lost.</p><p>Also, if you ever need to access that state in the future, you will be able to
spin up an Oasis Node in archive mode and query the pre-Damask state.</p></div></div>
<ol start="7">
<li class="">
<p>Perform any needed <a href="#damask-conf-changes" class="">configuration changes</a> described
below.</p>
</li>
<li class="">
<p>(only for ParaTime operators) Replace old versions of your ParaTime binaries
with the new <a href="https://github.com/oasisprotocol/oasis-core/issues/4469" target="_blank" rel="noopener noreferrer" class="">Oasis Runtime Containers (<code>.orc</code>)</a> introduced in the
Damask upgrade.</p>
<p>For the official Oasis ParaTimes, use the following versions:</p>
<ul>
<li class="">Emerald ParaTime: <a href="https://github.com/oasisprotocol/emerald-paratime/releases/tag/v8.2.0" target="_blank" rel="noopener noreferrer" class="">8.2.0</a></li>
<li class="">Cipher ParaTime: <a href="https://github.com/oasisprotocol/cipher-paratime/releases/tag/v1.1.0" target="_blank" rel="noopener noreferrer" class="">1.1.0</a></li>
</ul>
</li>
<li class="">
<p>(only Emerald Web3 Gateway operators) Replace old version of Emerald Web3
Gateway with version <a href="https://github.com/oasisprotocol/emerald-web3-gateway/releases/tag/v2.1.0" target="_blank" rel="noopener noreferrer" class="">2.1.0</a>.</p>
</li>
<li class="">
<p>(only Rosetta Gateway operators) Replace old version of Oasis Rosetta
Gateway with version <a href="https://github.com/oasisprotocol/oasis-rosetta-gateway/releases/tag/v2.2.0" target="_blank" rel="noopener noreferrer" class="">2.2.0</a>.</p>
</li>
<li class="">
<p>Start your node and re-enable auto-starting via your process manager.</p>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="damask-conf-changes">Configuration Changes<a href="#damask-conf-changes" class="hash-link" aria-label="Direct link to Configuration Changes" title="Direct link to Configuration Changes" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>To see the full extent of the changes examine the <a href="https://github.com/oasisprotocol/oasis-core/blob/v22.1.3/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="">Change Log</a>:
of the <strong>Oasis Core 22.1.3</strong>, in particular the <a href="https://github.com/oasisprotocol/oasis-core/blob/v22.1.3/CHANGELOG.md#221-2022-04-01" target="_blank" rel="noopener noreferrer" class="">22.1</a> and
<a href="https://github.com/oasisprotocol/oasis-core/blob/v22.1.3/CHANGELOG.md#220-2022-03-01" target="_blank" rel="noopener noreferrer" class="">22.0</a> sections.</p></div></div>
<p>If your node is currently configured to run a ParaTime, you need to perform some
additional steps.</p>
<p>The way ParaTime binaries are distributed has changed so that all required
artifacts are contained in a single archive called the Oasis Runtime Container
and have the <code>.orc</code> extension.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Links to updated ParaTime binaries will be published on the
<a class="" href="/node/network/mainnet#paratimes">Network Parameters</a> page for their respective
ParaTimes.</p></div></div>
<p>The configuration is simplified as the <code>runtime.paths</code> now only needs to list
all of the supported <code>.orc</code> files (see below for an example).</p>
<p>Instead of separately configuring various roles for a node, there is now a
single configuration flag called <code>runtime.mode</code> which enables the correct roles
as needed. It should be set to one of the following values:</p>
<ul>
<li class=""><code>none</code> (runtime support is disabled, only consensus layer is enabled)</li>
<li class=""><code>compute</code> (node is participating as a runtime compute node for all the
configured runtimes)</li>
<li class=""><code>keymanager</code> (node is participating as a keymanager node)</li>
<li class=""><code>client</code> (node is a stateful runtime client)</li>
<li class=""><code>client-stateless</code> (node is a stateless runtime client and connects to
remote nodes for any state queries)</li>
</ul>
<p>Nodes that have so far been participating as compute nodes should set the mode
to <code>compute</code> and nodes that have been participating as clients for querying
and transaction submission should set it to <code>client</code>.</p>
<p>The following configuration flags have been removed:</p>
<ul>
<li class=""><code>runtime.supported</code> (existing <code>runtime.paths</code> is used instead)</li>
<li class=""><code>worker.p2p.enabled</code> (now automatically set based on runtime mode)</li>
<li class=""><code>worker.compute.enabled</code> (now set based on runtime mode)</li>
<li class=""><code>worker.keymanager.enabled</code> (now set based on runtime mode)</li>
<li class=""><code>worker.storage.enabled</code> (no longer needed)</li>
</ul>
<p>Also the <code>worker.client</code> option is no longer needed unless you are providing
consensus layer RPC services.</p>
<p>For example, if your <em>previous</em> configuration looked like:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">runtime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">supported</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;000000000000000000000000000000000000000000000000000000000000beef&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;000000000000000000000000000000000000000000000000000000000000beef&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /path/to/runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">worker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... other settings omitted ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">compute</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">client</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12345</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">addresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xx.yy.zz.vv:12345&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">p2p</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12346</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">addresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xx.yy.zz.vv:12346&quot;</span><br></span></code></pre></div></div>
<p>The <em>new</em> configuration should look like:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">runtime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> compute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /path/to/runtime.orc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">worker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... other settings omitted ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">p2p</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12346</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">addresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xx.yy.zz.vv:12346&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="additional-notes">Additional notes<a href="#additional-notes" class="hash-link" aria-label="Direct link to Additional notes" title="Direct link to Additional notes" translate="no">​</a></h3>
<p>Examine the <a href="https://github.com/oasisprotocol/oasis-core/blob/v22.1.3/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="">Change Log</a> of the 22.1.3 release, in particular
the <a href="https://github.com/oasisprotocol/oasis-core/blob/v22.1.3/CHANGELOG.md#221-2022-04-01" target="_blank" rel="noopener noreferrer" class="">22.1</a> and <a href="https://github.com/oasisprotocol/oasis-core/blob/v22.1.3/CHANGELOG.md#220-2022-03-01" target="_blank" rel="noopener noreferrer" class="">22.0</a> sections.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="2021-08-31-upgrade">2021-08-31 (16:00 UTC) - Parameter Update<a href="#2021-08-31-upgrade" class="hash-link" aria-label="Direct link to 2021-08-31 (16:00 UTC) - Parameter Update" title="Direct link to 2021-08-31 (16:00 UTC) - Parameter Update" translate="no">​</a></h2>
<ul>
<li class=""><strong>Upgrade height:</strong> upgrade is scheduled to happen at epoch <strong>8049.</strong></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>We expect the Mainnet network to reach this epoch at around 2021-08-31 16:00 UTC.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="proposed-parameter-changes">Proposed Parameter Changes<a href="#proposed-parameter-changes" class="hash-link" aria-label="Direct link to Proposed Parameter Changes" title="Direct link to Proposed Parameter Changes" translate="no">​</a></h3>
<p>The <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.2.8" target="_blank" rel="noopener noreferrer" class="">Oasis Core 21.2.8</a> release contains the <a href="https://github.com/oasisprotocol/oasis-core/blob/v21.2.8/go/upgrade/migrations/consensus_parameters.go" target="_blank" rel="noopener noreferrer" class=""><code>consensus-params-update-2021-08</code> upgrade handler</a> which will update the following parameters in the consensus layer:</p>
<ul>
<li class="">**<code>staking.params.max_allowances</code> ** specifies the maximum number of allowances on account can store. It will be set to <code>16</code> (default value is <code>0</code>) to enable support for beneficiary allowances which are required to transfer tokens into a ParaTime.</li>
<li class="">**<code>staking.params.gas_costs</code> ** , <strong><code>governance.params.gas_costs</code></strong> and <strong><code>roothash.params.gas_costs</code></strong> specify gas costs for various types of staking, governance and roothash transactions. Gas costs for transactions that were missing gas costs will be added.</li>
<li class=""><strong><code>scheduler.params.max_validators</code></strong> is the maximum size of the consensus committee (i.e. the validator set). It will be increased to<code>110</code> (it was set to <code>100</code> previously).</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions---voting-1">Instructions - Voting<a href="#instructions---voting-1" class="hash-link" aria-label="Direct link to Instructions - Voting" title="Direct link to Instructions - Voting" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p><strong>Voting for the upgrade proposal will end at epoch 7876. We expect the Mainnet network to reach this epoch at around 2021-08-24 12:00 UTC</strong><em><strong>.</strong></em></p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>At this time only entities which have active validator nodes scheduled in the validator set are eligible to vote for governance proposals.</p></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>At least <strong>75%</strong> of the <strong>voting power</strong> needs to cast vote on the upgrade proposal for the result to be valid.</p><p>At least <strong>90%</strong> of the votes need to be <strong>yes</strong> votes for a proposal to be accepted.</p></div></div>
<p>This upgrade will be the first upgrade that will use the new on-chain governance service introduced in the <a class="" href="/node/reference/upgrades/cobalt-upgrade">Cobalt Upgrade</a>.</p>
<p>The Oasis Protocol Foundation has submitted an <a class="" href="/core/consensus/services/governance#submit-proposal">upgrade governance proposal</a> with the following contents:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">&quot;v&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;handler&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;consensus-params-update-2021-08&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;target&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;consensus_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;runtime_host_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;runtime_committee_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;epoch&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8049</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>To view the proposal yourself, you can run the following command on your online Oasis Node:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node governance list_proposals -a $ADDR | jq</span><br></span></code></pre></div></div>
<p>where <code>$ADDR</code> represents the path to the internal Oasis Node UNIX socket prefixed with <code>unix:</code> (e.g.<code>unix:/serverdir/node/internal.sock</code>).</p>
<p>The output should look like:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;submitter&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;oasis1qpydpeyjrneq20kh2jz2809lew6d9p64yymutlee&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;state&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;active&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;deposit&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10000000000000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">&quot;upgrade&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;v&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;handler&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;consensus-params-update-2021-08&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;target&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">&quot;consensus_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">&quot;runtime_host_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">&quot;runtime_committee_protocol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">&quot;major&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;epoch&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8049</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;created_at&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7708</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;closes_at&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7876</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>Obtain <a class="" href="/build/tools/cli/account#show">your entity&#x27;s nonce</a> and store it in the <code>NONCE</code> variable. You can do that by running:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ENTITY_DIR=&lt;PATH</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">TO</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">YOUR</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ENTITY</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ADDRESS=$(oasis</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node stake pubkey2address </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">public_key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $(cat $ENTITY_DIR/entity.json </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> jq .id </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">r))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NONCE=$(oasis</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node stake account nonce </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stake.account.address $ADDRESS </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a $ADDR)</span><br></span></code></pre></div></div>
<p>where <code>&lt;PATH-TO-YOUR-ENTITY&gt;</code> is the path to your entity&#x27;s descriptor, e.g. <code>/serverdir/node/entity/</code>.</p>
<p>To vote for the proposal, use the following command to generate a suitable transaction:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node governance gen_cast_vote \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;${TX_FLAGS[@]}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --vote.proposal.id 1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --vote yes \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.file tx_cast_vote.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.nonce $NONCE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.fee.gas 2000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.fee.amount 2000</span><br></span></code></pre></div></div>
<p>where <code>TX_FLAGS</code> refer to previously set base and signer flags as described in the <a class="" href="/core/oasis-node/cli">Oasis node CLI Tools Setup</a> doc.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>If you use a Ledger-signer backed entity, you will need to install version 2.3.1 of the Oasis App as described in <a href="#installing-oasis-app-231-to-your-ledger" class="">Installing Oasis App 2.3.1 to Your Ledger</a>. This is needed because the current version of the Oasis App available through Ledger Live, version 1.8.2, doesn&#x27;t support signing the <code>governance.CastVote</code> transaction type.</p></div></div>
<p>To submit the generated transaction, copy <code>tx_cast_vote.json</code> to the online Oasis node and submit it from there:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node consensus submit_tx \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -a $ADDR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.file tx_cast_vote.json</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions---before-upgrade-system-preparation">Instructions - Before Upgrade System Preparation<a href="#instructions---before-upgrade-system-preparation" class="hash-link" aria-label="Direct link to Instructions - Before Upgrade System Preparation" title="Direct link to Instructions - Before Upgrade System Preparation" translate="no">​</a></h3>
<ul>
<li class="">This upgrade will upgrade <strong>Oasis Core</strong> to version <strong>21.2.8</strong> which:<!-- -->
<ul>
<li class="">Upgrades the BadgerDB database backend from v2 to v3. See <a class="" href="/node/reference/upgrade-logs/mainnet#badgerdb-v2-to-v3-migration"><strong>BadgerDB v2 to v3 Migration</strong></a> section for required steps to be done before upgrade.</li>
<li class="">Has a check that makes sure the <strong>file descriptor limit</strong> is set to an appropriately high value (at least 50000). While previous versions only warned in case the limit was set too low, this version will refuse to start. Follow the <a class="" href="/node/run-your-node/prerequisites/system-configuration#increase-file-descriptor-limit">File Descriptor Limit</a> documentation page for details on how to increase the limit on your system.</li>
</ul>
</li>
<li class="">Stop your node, replace the old version of Oasis Node with version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.2.8" target="_blank" rel="noopener noreferrer" class="">21.2.8</a> and restart your node.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Since Oasis Core 21.2.8 is otherwise compatible with the current consensus layer protocol, you may upgrade your Mainnet node to this version at any time.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>This is not dump &amp; restore upgrade</div><div class="admonitionContent_BuS1"><p>For this upgrade, <strong>do NOT wipe state</strong>.</p></div></div>
<ul>
<li class="">Once reaching the designated upgrade epoch, your node will stop and needs to be upgraded to Oasis Core <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.2.8" target="_blank" rel="noopener noreferrer" class="">21.2.8</a>.<!-- -->
<ul>
<li class="">If you upgraded your node to Oasis Core 21.2.8 before the upgrade epoch was reached, you only need to restart your node for the upgrade to proceed.</li>
<li class="">Otherwise, you need to upgrade your node to Oasis Core 21.2.8 first and then restart it.</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you use a process manager like <a href="https://github.com/systemd/systemd" target="_blank" rel="noopener noreferrer" class="">systemd</a> or <a href="http://supervisord.org" target="_blank" rel="noopener noreferrer" class="">Supervisor</a>, you can configure it to restart the Oasis Node automatically.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The Mainnet&#x27;s genesis file and the genesis document&#x27;s hash will remain the same.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="badgerdb-v2-to-v3-migration">BadgerDB v2 to v3 Migration<a href="#badgerdb-v2-to-v3-migration" class="hash-link" aria-label="Direct link to BadgerDB v2 to v3 Migration" title="Direct link to BadgerDB v2 to v3 Migration" translate="no">​</a></h3>
<p>This upgrade will upgrade Oasis Core to version <strong>21.2.x</strong> which includes the new <a href="https://github.com/dgraph-io/badger" target="_blank" rel="noopener noreferrer" class=""><strong>BadgerDB</strong></a> <strong>v3</strong>.</p>
<p>Since BadgerDB&#x27;s on-disk format changed in v3, it requires on-disk state migration. The migration process is done automatically and makes the following steps:</p>
<ul>
<li class="">
<p>Upon startup, Oasis Node will start migrating all <code>&lt;DATA-DIR&gt;/**/*.badger.db</code> files (Badger v2 files) and start writing Badger v3 DB to files with the <code>.migrate</code> suffix.</p>
</li>
<li class="">
<p>If the migration fails in the middle, Oasis Node will delete all <code>&lt;DATA-DIR&gt;/**/*.badger.db.migrate</code> files the next time it starts and start the migration (of the remaining <code>&lt;DATA-DIR&gt;/**/*.badger.db</code></p>
<p>files) again.</p>
</li>
<li class="">
<p>If the migration succeeds, Oasis Node will append the <code>.backup</code> suffix to all <code>&lt;DATA-DIR&gt;/**/*.badger.db</code> files (Badger v2 files) and remove the <code>.migrate</code> suffix from all <code>&lt;DATA-DIR&gt;/**/*.badger.db.migrate</code> files (Badger v3 files).</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The BadgerDB v2 to v3 migration is <strong>very I/O intensive</strong> (both IOPS and throughput) and <strong>may take a couple of hours</strong> to complete.</p><p>To follow its progress, run:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">shopt -s globstar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">du -h &lt;DATA-DIR&gt;/**/*.badger.db* | sort -h -r</span><br></span></code></pre></div></div><p>and observe the sizes of various <code>*.badger.db*</code> directories.</p><p>For example, if it outputted the following:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">55G	data/tendermint/data/blockstore.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">37G	data/tendermint/abci-state/mkvs_storage.badger.db.backup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">32G	data/tendermint/abci-state/mkvs_storage.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">16G	data/tendermint/data/blockstore.badger.db.migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.9G	data/tendermint/data/state.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">62M	data/persistent-store.badger.db.backup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.1M	data/tendermint/abci-state/mkvs_storage.badger.db.backup/checkpoints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.1M	data/tendermint/abci-state/mkvs_storage.badger.db.backup/checkpoints/4767601/ca51b06a054b69f2c18b9781ea42f0b00900de199c1937398514331b0d136ec3/chunks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.1M	data/tendermint/abci-state/mkvs_storage.badger.db.backup/checkpoints/4767601/ca51b06a054b69f2c18b9781ea42f0b00900de199c1937398514331b0d136ec3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.1M	data/tendermint/abci-state/mkvs_storage.badger.db.backup/checkpoints/4767601</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.1M	data/tendermint/abci-state/mkvs_storage.badger.db.backup/checkpoints/4757601/2ec3a28b1f4a2fcce503f2e80eb5d77b6c0a4d1075e8a14d880ac390338a855e/chunks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.1M	data/tendermint/abci-state/mkvs_storage.badger.db.backup/checkpoints/4757601/2ec3a28b1f4a2fcce503f2e80eb5d77b6c0a4d1075e8a14d880ac390338a855e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.1M	data/tendermint/abci-state/mkvs_storage.badger.db.backup/checkpoints/4757601</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">36K	data/persistent-store.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20K	data/tendermint/data/evidence.badger.db</span><br></span></code></pre></div></div><p>then the <code>mkvs_storage.badger.db</code> was already migrated:</p><ul>
<li class="">old BadgerDB v2 directory: <code>37G data/tendermint/abci-state/mkvs_storage.badger.db.backup</code></li>
<li class="">new BadgerDB v3 directory: <code>32G data/tendermint/abci-state/mkvs_storage.badger.db</code></li>
</ul><p>and now the <code>blockstore.badger.db</code> is being migrated:</p><ul>
<li class="">
<p>current BadgerDB v2 directory:</p>
<p><code>55G data/tendermint/data/blockstore.badger.db</code></p>
</li>
<li class="">
<p>new BadgerDB v3 directory: <code>16G data/tendermint/data/blockstore.badger.db.migration</code></p>
</li>
</ul><p>Note that usually, the new BadgerDB v3 directory is smaller due to less fragmentation.</p></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="extra-storage-requirements">Extra storage requirements<a href="#extra-storage-requirements" class="hash-link" aria-label="Direct link to Extra storage requirements" title="Direct link to Extra storage requirements" translate="no">​</a></h4>
<p>Your node will thus need to have extra storage space to store both the old and the new BadgerDB files.</p>
<p>To see estimate how much extra space the migration will need, use the <code>du</code> tool:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">shopt -s globstar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">du -h &lt;DATA-DIR&gt;/**/*.badger.db | sort -h -r</span><br></span></code></pre></div></div>
<p>This is an example output from a Mainnet node that uses <code>/srv/oasis/node</code> as the <code>&lt;DATA-DIR&gt;</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">43G	/srv/oasis/node/tendermint/data/blockstore.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">28G	/srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">311M	/srv/oasis/node/tendermint/data/state.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.0M	/srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">996K	/srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4517601</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">996K	/srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4507601</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">992K	/srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4517601/ba6218d7be2df31ba6e7201a8585c6435154728e55bbb7df1ffebe683bf60217</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">992K	/srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4507601/1e0bf592bb0d99832b13ad91bc32aed018dfc2639e07b93a254a05f6791a19ac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">984K	/srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4517601/ba6218d7be2df31ba6e7201a8585c6435154728e55bbb7df1ffebe683bf60217/chunks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">984K	/srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4507601/1e0bf592bb0d99832b13ad91bc32aed018dfc2639e07b93a254a05f6791a19ac/chunks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">148K	/srv/oasis/node/persistent-store.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">36K	/srv/oasis/node/tendermint/data/evidence.badger.db</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>After you&#x27;ve confirmed your node is up and running, you can safely delete all the  <code>&lt;DATA-DIR&gt;/**/*.badger.db.backup</code> files.</p></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="extra-memory-requirements">Extra memory requirements<a href="#extra-memory-requirements" class="hash-link" aria-label="Direct link to Extra memory requirements" title="Direct link to Extra memory requirements" translate="no">​</a></h4>
<p>BadgerDB v2 to v3 migration can use a number of Go routines to migrate different database files in parallel.</p>
<p>However, this comes with a memory cost. For larger database files, it might need up to 4 GB of RAM per database, so we recommend lowering the number of Go routines BadgerDB uses during migration (<code>badger.migrate.num_go_routines</code>) if your node has less than 8 GB of RAM.</p>
<p>If your node has less than 8 GB of RAM, set the number of Go routines BadgerDB uses during migration to 2 (default is 8) by adding the following to your node&#x27;s <code>config.yml</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># BadgerDB configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">badger:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  migrate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Set the number of Go routines BadgerDB uses during migration to 2 to lower</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # the memory pressure during migration (at the expense of a longer migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # time).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    num_go_routines: 2</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-oasis-app-231-to-your-ledger">Installing Oasis App 2.3.1 to Your Ledger<a href="#installing-oasis-app-231-to-your-ledger" class="hash-link" aria-label="Direct link to Installing Oasis App 2.3.1 to Your Ledger" title="Direct link to Installing Oasis App 2.3.1 to Your Ledger" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This manual installation procedure is needed until the latest version of the Oasis App, version 2.3.1, becomes available through <a href="https://www.ledger.com/ledger-live/" target="_blank" rel="noopener noreferrer" class="">Ledger Live</a>&#x27;s Manager.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Unlike Nano S devices, <strong>Nano X</strong> devices are locked meaning one cannot manual install the latest version of the Oasis App on them. If you use a Nano X device, you will need to temporarily switch to a Nano S device or wait for the new version of the Oasis App to be available through Ledger Live&#x27;s Manager.</p></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="update-firmware-to-version-200">Update Firmware to Version 2.0.0<a href="#update-firmware-to-version-200" class="hash-link" aria-label="Direct link to Update Firmware to Version 2.0.0" title="Direct link to Update Firmware to Version 2.0.0" translate="no">​</a></h4>
<p>First, make sure the firmware on your Nano S is up-to-date. At least <a href="https://support.ledger.com/hc/en-us/articles/360010446000-Ledger-Nano-S-firmware-release-notes" target="_blank" rel="noopener noreferrer" class="">version 2.0.0</a> released on May 4, 2021, is required. Follow <a href="https://support.ledger.com/hc/en-us/articles/360002731113-Update-Ledger-Nano-S-firmware" target="_blank" rel="noopener noreferrer" class="">Ledger&#x27;s instructions for updating the firmware on your Nano S</a>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="install-prerequisites-for-manual-installation">Install Prerequisites for Manual Installation<a href="#install-prerequisites-for-manual-installation" class="hash-link" aria-label="Direct link to Install Prerequisites for Manual Installation" title="Direct link to Install Prerequisites for Manual Installation" translate="no">​</a></h4>
<p>The manual installation process relies on some tooling that needs to be available on the system:</p>
<ul>
<li class=""><a href="https://www.python.org" target="_blank" rel="noopener noreferrer" class="">Python</a> 3.</li>
<li class=""><a href="https://github.com/LedgerHQ/blue-loader-python" target="_blank" rel="noopener noreferrer" class="">Python tools for Ledger Blue, Nano S and Nano X</a>.</li>
</ul>
<p>Most systems should already have <a href="https://www.python.org" target="_blank" rel="noopener noreferrer" class="">Python</a> pre-installed.</p>
<p>To install <a href="https://github.com/LedgerHQ/blue-loader-python" target="_blank" rel="noopener noreferrer" class="">Python tools for Ledger Blue, Nano S and Nano X</a>, use <a href="https://pip.pypa.io/en/stable/" target="_blank" rel="noopener noreferrer" class="">pip</a>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip3 install --upgrade ledgerblue</span><br></span></code></pre></div></div>
<p>You might want to install the packages to a <a href="https://packaging.python.org/tutorials/installing-packages/#creating-virtual-environments" target="_blank" rel="noopener noreferrer" class="">Python virtual environment</a> or via so-called <a href="https://pip.pypa.io/en/stable/user_guide/#user-installs" target="_blank" rel="noopener noreferrer" class="">User install</a> (i.e. isolated to the current user).</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="download-oasis-app-231">Download Oasis App 2.3.1<a href="#download-oasis-app-231" class="hash-link" aria-label="Direct link to Download Oasis App 2.3.1" title="Direct link to Download Oasis App 2.3.1" translate="no">​</a></h4>
<p>Download the <a href="https://github.com/Zondax/ledger-oasis/releases/download/v2.3.1/installer_s.sh" target="_blank" rel="noopener noreferrer" class="">Oasis App 2.3.1 installer for Nano S</a> from <a href="https://github.com/Zondax/ledger-oasis" target="_blank" rel="noopener noreferrer" class="">Zondax&#x27;s Oasis App GitHub repo</a>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="install-oasis-app-231">Install Oasis App 2.3.1<a href="#install-oasis-app-231" class="hash-link" aria-label="Direct link to Install Oasis App 2.3.1" title="Direct link to Install Oasis App 2.3.1" translate="no">​</a></h4>
<p>Make the downloaded installer executable by running:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x installer_s.sh</span><br></span></code></pre></div></div>
<p>Connect you Nano S and unlock it. Then execute the installer:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./installer_s.sh load</span><br></span></code></pre></div></div>
<p>Your Nano S will give you the option to either:</p>
<ul>
<li class=""><em>Deny unsafe manager</em>, or</li>
<li class="">review the <em>Public Key</em> and <em>Allow unsafe manager</em>.</li>
</ul>
<p>First review the public key and ensure it matches the <code>Generated random root public key</code> displayed in the terminal.</p>
<p>Then double press the <em>Allow unsafe manager</em> option.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>If there is an existing version of the <em>Oasis App</em> installed on your Nano S, you will be prompted with the <em>Uninstall Oasis</em> screen, followed by reviewing the <em>Identifier</em> (it will depend on the version of the Oasis App you have currently installed) and finally confirming deletion on the <em>Confirm action</em> screen.</p></div></div>
<p>After the new version of the Oasis App has finished loading, you will be prompted with the <em>Install app Oasis</em> screen, followed by reviewing the <em>Version</em>, <em>Identifier</em> and <em>Code Identifier</em> screens_._ Ensure the values are as follows:</p>
<ul>
<li class="">Version: 2.3.1</li>
<li class="">Identifier (<em>Application full hash</em> on the terminal): <code>E0CB424D3B1C2A0F694BCB6E99C3B37C7685399D59DD12D7CF80AF4A487882B1</code></li>
<li class="">Code Identifier: <code>C17EBE7CD356D01411A02A81C64CDA3E81F193BDA09BEBBD0AEAF75AD7EC35E3</code></li>
</ul>
<p>Finally, confirm installation of the new app by double pressing on the <em>Perform installation</em> screen. Your Ledger device will ask for your PIN again.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Installing Oasis App 2.3.1 on a Nano S with the firmware version &lt; 2.0.0 (e.g. 1.6.1) will NOT fail. It will show a different <em>Identifier</em> when installing the app which will NOT match the <em>Application full hash</em> shown on the terminal. However, opening the app will not work and it will &quot;freeze&quot; your Nano S device.</p></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="verify-installation">Verify Installation<a href="#verify-installation" class="hash-link" aria-label="Direct link to Verify Installation" title="Direct link to Verify Installation" translate="no">​</a></h4>
<p>Open the Oasis App on your Nano S and ensure the <em>Version</em> screen shows version 2.3.1.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Starting the manually installed version of the Oasis App will always show the <em>This app is not genuine</em> screen, followed by <em>Identifier</em> (which should match the Identifier value above) screen. Finally, open the application by double pressing on the <em>Open application</em> screen.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>After you&#x27;ve signed your <code>governance.CastVote</code> transaction, you can safely downgrade Oasis App to the latest official version available via <a href="https://www.ledger.com/ledger-live/" target="_blank" rel="noopener noreferrer" class="">Ledger Live</a>, version 1.8.2.</p><p>To do that, just open Ledger Live&#x27;s Manager and it will prompt you to install version 1.8.2.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="cobalt-upgrade">2021-04-28 (16:00 UTC) - Cobalt Upgrade<a href="#cobalt-upgrade" class="hash-link" aria-label="Direct link to 2021-04-28 (16:00 UTC) - Cobalt Upgrade" title="Direct link to 2021-04-28 (16:00 UTC) - Cobalt Upgrade" translate="no">​</a></h2>
<ul>
<li class=""><strong>Upgrade height:</strong> upgrade is scheduled to happen at epoch <strong>5046.</strong></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>We expect the Mainnet network to reach this epoch at around 2021-04-28 12:00 UTC.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions---before-upgrade-1">Instructions - Before upgrade<a href="#instructions---before-upgrade-1" class="hash-link" aria-label="Direct link to Instructions - Before upgrade" title="Direct link to Instructions - Before upgrade" translate="no">​</a></h3>
<ul>
<li class="">Make sure you are running the latest Mainnet-compatible Oasis Node version: <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v20.12.7" target="_blank" rel="noopener noreferrer" class="">20.12.7</a>.<!-- -->
<ul>
<li class="">If you are running a different <strong>20.12.x</strong> Oasis Node version, update to version <strong>20.12.7</strong> before the upgrade.</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Version <strong>20.12.7</strong> is backwards compatible with other <strong>20.12.x</strong> releases, so upgrade can be performed at any time by stopping the node and replacing the binary.</p></div></div>
<ul>
<li class="">
<p>To ensure your node will stop at epoch <strong>5046</strong> <a class="" href="/build/tools/cli/network#governance-create-proposal">submit the following upgrade descriptor</a> at any time before the upgrade:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &quot;mainnet-upgrade-2021-04-28&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;method&quot;: &quot;internal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;identifier&quot;: &quot;mainnet-upgrade-2021-04-28&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;epoch&quot;: 5046</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The upgrade descriptor contains a non-existing upgrade handler and will be used to coordinate the network shutdown, the rest of the upgrade is manual.</p></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="runtime-operators"><strong>Runtime operators</strong><a href="#runtime-operators" class="hash-link" aria-label="Direct link to runtime-operators" title="Direct link to runtime-operators" translate="no">​</a></h4>
<p>Following section is relevant only for <strong>runtime operators</strong> that are running <strong>storage</strong> nodes for active runtimes on the Mainnet.</p>
<p>This upgrade requires a runtime storage node migration to be performed <strong>before the upgrade genesis is published</strong>. This can be done before the upgrade epoch is reached by stopping all runtime nodes and running the migration.</p>
<p><strong>Backup your node&#x27;s data directory</strong></p>
<p>To prevent irrecoverable runtime storage data corruption/loss in case of a failed storage migration, backup your node&#x27;s data directory.</p>
<p>For example, to backup the <code>/serverdir/node</code> directory using the <a href="https://rsync.samba.org" target="_blank" rel="noopener noreferrer" class="">rsync</a> tool, run:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rsync -a /serverdir/node/ /serverdir/node-BACKUP/</span><br></span></code></pre></div></div>
<p>The storage database on all storage nodes needs to be migrated with the following command (using the <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.1.1" target="_blank" rel="noopener noreferrer" class="">21.1.1</a> binary):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node storage migrate \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --datadir &lt;NODE-DATADIR&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --runtime.supported &lt;RUNTIME-ID&gt;</span><br></span></code></pre></div></div>
<p>After the migration to v5 completes, you will see an output similar to:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrating from v4 to v5...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrating version 24468...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrated root state-root:195cf7a9a103e7300b2bb4e537cb9935cbebd83e448e67aa55433861a6ad7426 -&gt; state-root:cea105a5d701deab935b94af9e8e0c5af5dcdb61c242bf434da9f11aa8d110ba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrated root io-root:0850c5a33ee7f45aa92724b7d5f28c9ac9ae8799b88cc5be9773e8aba9526ca7 -&gt; io-root:19713a2b44e1bf868ebee43c36872baa3058870bb890a5e25d1c4cea2622be77</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrated root io-root:477391131f60ac2c22bce9167c7e3783a13d4fb81fddd2d388b4ead6a586fe52 -&gt; io-root:f29f86d491303c5fd7b3572e97cbd65b7487b6b4ac519623afd161cc2e4678b7</span><br></span></code></pre></div></div>
<p>Take note of the displayed <code>state-root</code> and report it to the Foundation, as it needs to be included in the upgrade&#x27;s new genesis file. Keep the runtime nodes stopped until the upgrade epoch is reached. At upgrade epoch, upgrade the nodes by following the remaining steps above.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions---upgrade-day-1">Instructions - Upgrade day<a href="#instructions---upgrade-day-1" class="hash-link" aria-label="Direct link to Instructions - Upgrade day" title="Direct link to Instructions - Upgrade day" translate="no">​</a></h3>
<p>Following steps should be performed on <strong>2021-04-28</strong> only after the network has reached the upgrade epoch and has halted:</p>
<ul>
<li class="">Download the genesis file published in the <a href="https://github.com/oasisprotocol/mainnet-artifacts/releases/tag/2021-04-28" target="_blank" rel="noopener noreferrer" class="">Cobalt Upgrade release</a>.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Mainnet state at epoch <strong>5046</strong> will be exported and migrated to a 21.1.x compatible genesis file. Upgrade genesis file will be published on the above link soon after reaching the upgrade epoch.</p></div></div>
<ul>
<li class="">Verify the provided Cobalt upgrade genesis file by comparing it to network state dump. See instructions in the <a class="" href="/node/run-your-node/maintenance/handling-network-upgrades#verify-genesis">Handling Network Upgrades</a> guide.</li>
<li class="">Replace the old genesis file with the new Cobalt upgrade genesis file.</li>
<li class="">Stop your node (if you haven&#x27;t stopped it already by submitting the upgrade descriptor).</li>
<li class="">Replace the old version of Oasis Node with version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.1.1" target="_blank" rel="noopener noreferrer" class="">21.1.1</a>.</li>
<li class=""><a class="" href="/node/run-your-node/maintenance/wiping-node-state#state-wipe-and-keep-node-identity">Wipe state</a>.</li>
<li class="">Start your node.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>For more detailed instructions, see the <a class="" href="/node/run-your-node/maintenance/handling-network-upgrades">Handling Network Upgrades</a> guide.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="additional-notes-1">Additional notes<a href="#additional-notes-1" class="hash-link" aria-label="Direct link to Additional notes" title="Direct link to Additional notes" translate="no">​</a></h3>
<p>Examine the <a href="https://github.com/oasisprotocol/oasis-core/blob/v21.1.1/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="">Change Log</a> of the 21.1.1 (and 21.0) releases.</p>
<p><strong>Runtime operators</strong></p>
<p>Note the following configuration change in the <a href="https://github.com/oasisprotocol/oasis-core/blob/v21.1.1/CHANGELOG.md#configuration-changes" target="_blank" rel="noopener noreferrer" class="">21.0</a> release.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p><strong>Storage access policy changes</strong></p><p>Due to the changes in the default access policy on storage nodes, at least one of the storage nodes should be configured with the <code>worker.storage.public_rpc.enabled</code> flag set to <code>true</code>.</p><p>Otherwise, external runtime clients wont be able to connect to any storage nodes.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="mainnet-upgrade">2020-11-18 (16:00 UTC) - Mainnet<a href="#mainnet-upgrade" class="hash-link" aria-label="Direct link to 2020-11-18 (16:00 UTC) - Mainnet" title="Direct link to 2020-11-18 (16:00 UTC) - Mainnet" translate="no">​</a></h2>
<ul>
<li class=""><strong>Block height</strong> when Mainnet Beta network stops: <strong>702000.</strong></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>We expect the Mainnet Beta network to reach this block height at around 2020-11-18 13:30 UTC.</p></div></div>
<ul>
<li class=""><strong>Upgrade window:</strong>
<ul>
<li class="">Start: <strong>2020-11-18T16:00:00Z.</strong></li>
<li class="">End: After nodes representing <strong>2/3+ stake</strong> do the upgrade.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions">Instructions<a href="#instructions" class="hash-link" aria-label="Direct link to Instructions" title="Direct link to Instructions" translate="no">​</a></h3>
<ul>
<li class="">Download <a class="" href="/node/run-your-node/prerequisites/oasis-node">Oasis Node</a> version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v20.12.2" target="_blank" rel="noopener noreferrer" class="">20.12.2</a>, while continuing to run version 20.10.x.</li>
<li class="">(optional) Use Oasis Node version 20.12.2 to dump network state at the specified block height. It will connect to the running version 20.10.x node.</li>
<li class="">Download the Mainnet genesis file published in the <a href="https://github.com/oasisprotocol/mainnet-artifacts/releases/tag/2020-11-18" target="_blank" rel="noopener noreferrer" class="">2020-11-18 release</a>.</li>
<li class="">(optional) Verify the provided Mainnet genesis file by comparing it to network state dump. See instructions in the <a class="" href="/node/run-your-node/maintenance/handling-network-upgrades#verify-genesis">Handling Network Upgrades</a> guide.</li>
<li class="">Replace the old Mainnet Beta genesis file with the Mainnet genesis file.</li>
<li class="">Stop your node.</li>
<li class="">Remove the old 20.10.x version of Oasis Node.</li>
<li class=""><a class="" href="/node/run-your-node/maintenance/wiping-node-state#state-wipe-and-keep-node-identity">Wipe state</a>.</li>
<li class="">Update your node&#x27;s configuration per instructions in <a class="" href="/node/reference/upgrade-logs/mainnet#configuration-changes">Configuration changes</a> below.</li>
<li class="">Start your node.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This time, we recommend dumping the network state with the upgraded Oasis Node binary so that the genesis file will be in the <a class="" href="/core/consensus/genesis#canonical-form">canonical form</a>.</p><p>The canonical form will make it easier to compare the obtained genesis file with the one provided by us.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>For more detailed instructions, see the <a class="" href="/node/run-your-node/maintenance/handling-network-upgrades">Handling Network Upgrades</a> guide.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration-changes-1">Configuration changes<a href="#configuration-changes-1" class="hash-link" aria-label="Direct link to Configuration changes" title="Direct link to Configuration changes" translate="no">​</a></h3>
<p>Since we are upgrading to the Mainnet, we recommend you change your node&#x27;s configuration and disable pruning of the consensus&#x27; state by removing the <code>consensus.tendermint.abci.prune</code> key.</p>
<p>For example, this configuration:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Consensus backend.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">consensus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Setting this to true will mean that the node you&#x27;re deploying will attempt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># to register as a validator.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">validator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Tendermint backend configuration.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tendermint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">abci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">prune</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> keep_n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Keep ~7 days of data since block production is ~1 block every 6 seconds.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># (7*24*3600/6 = 100800)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">num_kept</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">listen_address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//0.0.0.0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">26656</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre></div></div>
<p>Becomes:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Consensus backend.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">consensus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Setting this to true will mean that the node you&#x27;re deploying will attempt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># to register as a validator.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">validator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Tendermint backend configuration.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tendermint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">listen_address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//0.0.0.0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">26656</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="mainnet-beta-upgrade">2020-10-01 - Mainnet Beta<a href="#mainnet-beta-upgrade" class="hash-link" aria-label="Direct link to 2020-10-01 - Mainnet Beta" title="Direct link to 2020-10-01 - Mainnet Beta" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions-1">Instructions<a href="#instructions-1" class="hash-link" aria-label="Direct link to Instructions" title="Direct link to Instructions" translate="no">​</a></h3>
<ul>
<li class="">Stop your node.</li>
<li class=""><a class="" href="/node/run-your-node/maintenance/wiping-node-state#state-wipe-and-keep-node-identity">Wipe state</a>.</li>
<li class="">Replace the old genesis file with the Mainnet Beta genesis file published in the <a href="https://github.com/oasisprotocol/mainnet-artifacts/releases/tag/2020-10-01" target="_blank" rel="noopener noreferrer" class="">2020-10-01 release</a>.</li>
<li class="">Start your node.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>You should keep using Oasis Core version 20.10.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>For more detailed instructions, see the <a class="" href="/node/run-your-node/maintenance/handling-network-upgrades">Handling Network Upgrades</a> guide.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="mainnet-dry-run">2020-09-22 - Mainnet Dry Run<a href="#mainnet-dry-run" class="hash-link" aria-label="Direct link to 2020-09-22 - Mainnet Dry Run" title="Direct link to 2020-09-22 - Mainnet Dry Run" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="instructions-2">Instructions<a href="#instructions-2" class="hash-link" aria-label="Direct link to Instructions" title="Direct link to Instructions" translate="no">​</a></h3>
<ul>
<li class="">This is the initial deployment.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/oasisprotocol/docs/edit/main/docs/node/reference/upgrade-logs/mainnet.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-10-30T23:42:34.000Z" itemprop="dateModified">Oct 30, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/node/reference/upgrade-logs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Upgrade Logs</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/node/reference/upgrade-logs/testnet"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Testnet</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#eden-upgrade" class="table-of-contents__link toc-highlight">2023-11-29 (10:02 UTC) - Eden Upgrade</a><ul><li><a href="#configuration-changes" class="table-of-contents__link toc-highlight">Configuration Changes</a></li><li><a href="#data-directory-changes" class="table-of-contents__link toc-highlight">Data Directory Changes</a></li><li><a href="#state-changes" class="table-of-contents__link toc-highlight">State Changes</a></li></ul></li><li><a href="#damask-upgrade" class="table-of-contents__link toc-highlight">2022-04-11 (8:30 UTC) - Damask Upgrade</a><ul><li><a href="#instructions---voting" class="table-of-contents__link toc-highlight">Instructions - Voting</a></li><li><a href="#instructions---before-upgrade" class="table-of-contents__link toc-highlight">Instructions - Before upgrade</a></li><li><a href="#instructions---upgrade-day" class="table-of-contents__link toc-highlight">Instructions - Upgrade day</a></li><li><a href="#damask-conf-changes" class="table-of-contents__link toc-highlight">Configuration Changes</a></li><li><a href="#additional-notes" class="table-of-contents__link toc-highlight">Additional notes</a></li></ul></li><li><a href="#2021-08-31-upgrade" class="table-of-contents__link toc-highlight">2021-08-31 (16:00 UTC) - Parameter Update</a><ul><li><a href="#proposed-parameter-changes" class="table-of-contents__link toc-highlight">Proposed Parameter Changes</a></li><li><a href="#instructions---voting-1" class="table-of-contents__link toc-highlight">Instructions - Voting</a></li><li><a href="#instructions---before-upgrade-system-preparation" class="table-of-contents__link toc-highlight">Instructions - Before Upgrade System Preparation</a></li><li><a href="#badgerdb-v2-to-v3-migration" class="table-of-contents__link toc-highlight">BadgerDB v2 to v3 Migration</a></li><li><a href="#installing-oasis-app-231-to-your-ledger" class="table-of-contents__link toc-highlight">Installing Oasis App 2.3.1 to Your Ledger</a></li></ul></li><li><a href="#cobalt-upgrade" class="table-of-contents__link toc-highlight">2021-04-28 (16:00 UTC) - Cobalt Upgrade</a><ul><li><a href="#instructions---before-upgrade-1" class="table-of-contents__link toc-highlight">Instructions - Before upgrade</a></li><li><a href="#instructions---upgrade-day-1" class="table-of-contents__link toc-highlight">Instructions - Upgrade day</a></li><li><a href="#additional-notes-1" class="table-of-contents__link toc-highlight">Additional notes</a></li></ul></li><li><a href="#mainnet-upgrade" class="table-of-contents__link toc-highlight">2020-11-18 (16:00 UTC) - Mainnet</a><ul><li><a href="#instructions" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#configuration-changes-1" class="table-of-contents__link toc-highlight">Configuration changes</a></li></ul></li><li><a href="#mainnet-beta-upgrade" class="table-of-contents__link toc-highlight">2020-10-01 - Mainnet Beta</a><ul><li><a href="#instructions-1" class="table-of-contents__link toc-highlight">Instructions</a></li></ul></li><li><a href="#mainnet-dry-run" class="table-of-contents__link toc-highlight">2020-09-22 - Mainnet Dry Run</a><ul><li><a href="#instructions-2" class="table-of-contents__link toc-highlight">Instructions</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Tools</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://explorer.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Explorer</a></li><li class="footer__item"><a href="https://wallet.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wallet</a></li><li class="footer__item"><a href="https://github.com/oasisprotocol/cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">CLI</a></li><li class="footer__item"><a href="https://status.oasis.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Build</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://faucet.testnet.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Testnet Faucet</a></li><li class="footer__item"><a href="https://playground.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground</a></li><li class="footer__item"><a href="https://api.docs.oasis.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Node</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/node/network/mainnet">Mainnet</a></li><li class="footer__item"><a class="footer__link-item" href="/node/network/testnet">Testnet</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://oasis.io/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://t.me/oasisprotocolcommunity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC35UFPcZ2F1wjPxhPrSsESQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li><li class="footer__item"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
<p xmlns:cc="http://creativecommons.org/ns#">Copyright © 2025
by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://oasis.net">
Oasis Protocol Foundation</a>. We <a href="https://oasisprotocol.org/privacy-policy" target="_blank" rel="noopener noreferrer">respect your privacy</a>.
Unless otherwise specified, all text and images on this website are licensed
under <a href="http://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
CC BY 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="/img/cc.svg"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="/img/by.svg"></a>.
This does not include the Oasis software and the code examples, both of which are
licensed under <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
Apache 2.0</a>. Built with &#x2665; and Docusaurus.</p></div></div></div></footer><!--$--><!--/$--></div>
</body>
</html>